import"./base-23d00206.js";import{E as y,g as S}from"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";/* empty css                  */import{c as k}from"./el-main-e0dc383b.js";import{E as v}from"./el-divider-67eeba91.js";import{E as h,a as U}from"./el-steps-c8cdef54.js";import{a as E}from"./el-button-ded9ecc1.js";import{d as B,o as D,h as F}from"./@element-plus-a8abf029.js";import{u as O,o as j,e as L,f as T}from"./index-d07dfee2.js";import{E as V}from"./index-b8931eed.js";import{y as I,h as N,b as m,c,a as l,bf as i,ag as a,u as e,bI as s,S as M,o as u,af as g,a8 as C}from"./@vue-19632928.js";import"./lodash-es-cc4652a2.js";import"./error-78e43d3e.js";import"./typescript-defaf979.js";import"./index-711061c4.js";import"./@vueuse-0d360189.js";import"./event-9519ab40.js";import"./vnode-18f2a975.js";import"./@ctrl-f8748455.js";import"./quasar-ff3737c6.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./axios-439bb627.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";const z={class:"step-page"},A={class:"step-nav"},G={key:0},J={class:"el-upload__text"},P={class:"el-upload__tip"},q={key:1,style:{height:"10vh"}},H={href:"/api/download_result"},Se=I({__name:"COCOToLabelmeView",setup(K){const w=O();N(()=>{console.log("COCO To Labelme")});const r=m(1),n=m([]),f=m(),$=o=>{f.value.clearFiles();const t=o[0];t.uid=S(),f.value.handleStart(t)},b=async()=>{const o=j(),t=new FormData,p=await n.value[0].raw.arrayBuffer();t.append("json_file",new Blob([p]),n.value[0].name);const _=await L("form","/api/coco_to_labelme",t);if(_==null)return o.close(),!1;const d=await _.data;if(d){if(d.code!==0){T(`API Error: ${d.code}`);return}o.close(),r.value++}};return(o,t)=>(u(),c(M,null,[l("h4",null,i(o.$t("TransferFile",{fs:"COCO json",fe:"Labelme json"})),1),a(e(v)),l("div",z,[l("div",A,[a(e(U),{active:r.value,"finish-status":"success",class:"w3-margin-bottom",direction:e(w).lt.md?"horizontal":"vertical"},{default:s(()=>[a(e(h),{title:o.$t("Upload"),icon:e(B),onClick:t[0]||(t[0]=p=>(r.value=1,n.value=[])),class:"pointer"},null,8,["title","icon"]),a(e(h),{title:o.$t("Generate"),icon:e(D)},null,8,["title","icon"])]),_:1},8,["active","direction"])]),a(e(k),null,{default:s(()=>[r.value===1?(u(),c("div",G,[a(e(E),{type:"success",onClick:t[1]||(t[1]=p=>b())},{default:s(()=>[g(i(o.$t("Upload")),1)]),_:1}),a(e(v)),a(e(y),{"file-list":n.value,"onUpdate:fileList":t[2]||(t[2]=p=>n.value=p),class:"upload-demo",action:"/api/coco_to_labelme","auto-upload":!1,limit:1,"on-exceed":$,drag:""},{tip:s(()=>[l("div",P,i(o.$t("UploadJson")),1)]),default:s(()=>[a(e(V),{class:"el-icon--upload"},{default:s(()=>[a(e(F))]),_:1}),l("div",J,[g(i(o.$t("DropFile"))+" ",1),l("em",null,i(o.$t("ClickToUpload")),1)])]),_:1},8,["file-list"])])):C("",!0),r.value===2?(u(),c("div",q,[a(e(E),{type:"success"},{default:s(()=>[l("a",H,i(o.$t("Download")),1)]),_:1})])):C("",!0)]),_:1})])],64))}});export{Se as default};
