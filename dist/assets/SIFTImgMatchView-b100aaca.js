import"./base-23d00206.js";import{E as k}from"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import{E as F}from"./el-dialog-f482d18c.js";import"./el-overlay-81162264.js";import{E as f,a as C}from"./el-steps-c8cdef54.js";import{E as S}from"./el-divider-67eeba91.js";import{a as b}from"./el-button-ded9ecc1.js";import{c as R}from"./el-main-e0dc383b.js";import{d as T,g as N,o as B,p as P}from"./@element-plus-a8abf029.js";import{u as D,f as E,i as x}from"./index-d07dfee2.js";import{u as A}from"./uploadFile-6ce60004.js";import{_ as H}from"./UploadFile.vue_vue_type_script_setup_true_lang-d804558e.js";import{R as z}from"./ResultImgWithStash-c075e0f0.js";import{E as G}from"./index-b8931eed.js";import{y as L,h as W,b as s,c as d,a as i,bf as n,ag as o,u as e,bI as r,S as j,o as c,af as q,a8 as v}from"./@vue-19632928.js";import{_ as J}from"./json-editor-vue3-5344cb8d.js";import"./lodash-es-cc4652a2.js";import"./error-78e43d3e.js";import"./typescript-defaf979.js";import"./index-711061c4.js";import"./@vueuse-0d360189.js";import"./earthApi-baaacd65.js";import"./axios-439bb627.js";import"./use-dialog-b8544ca4.js";import"./event-9519ab40.js";import"./refs-e3a131a0.js";import"./vnode-18f2a975.js";import"./@ctrl-f8748455.js";import"./quasar-ff3737c6.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";import"./el-checkbox-d46297b7.js";import"./index-6127babd.js";import"./el-form-item-62aac1b2.js";import"./async-validator-dee29e8b.js";import"./StashSelect-5af938b3.js";/* empty css               */import"./el-select-99a9cb58.js";import"./el-scrollbar-e3b486eb.js";import"./index-32075738.js";import"./el-input-51d05b2a.js";import"./el-tooltip-4ed993c7.js";import"./stashSpace-391fdb88.js";import"./validator-7d68535e.js";import"./el-image-viewer-1a9f012d.js";import"./el-alert-65b82b76.js";import"./el-card-a6aa41d5.js";import"./jsoneditor-5f1e2c9e.js";const K={class:"step-page"},O={class:"step-nav"},Q={key:0},X={class:"el-upload__tip"},Y={class:"el-upload__tip text-red"},Z=["src"],tt={key:1},et={style:{display:"flex","flex-direction":"column"}},ot={class:"el-upload__tip text-red"},lt={key:2},it=L({__name:"SIFTImgMatchView",setup(at){const y=D();W(()=>{console.log("SIFTImgMatch")});const a=s(1),$=A(),g=s(""),_=s(!1),m=s([]),U=s(""),u=s([]),h=s([]),V=(t,l)=>{console.log(t,l)},w=t=>{g.value=t.url,_.value=!0},I=()=>{if(m.value.length===0){E(x.global.t("NoImg"));return}a.value=2},M=()=>{const t=$.uploadResult;if(t){if(t.code!==0){E(`API Error: ${t.code}`);return}u.value=t.result.all_names,h.value=t.result.all_results,a.value++}};return(t,l)=>(c(),d(j,null,[i("h4",null,n(t.$t("SIFTImgMatch")),1),o(e(S)),i("div",K,[i("div",O,[o(e(C),{active:a.value,"finish-status":"success",class:"w3-margin-bottom",direction:e(y).lt.md?"horizontal":"vertical"},{default:r(()=>[o(e(f),{title:t.$t("Upload"),icon:e(T),onClick:l[0]||(l[0]=p=>(a.value=1,m.value=[],U.value="",u.value=[])),class:"pointer"},null,8,["title","icon"]),o(e(f),{title:t.$t("Setting"),icon:e(N),onClick:I,class:"pointer"},null,8,["title","icon"]),o(e(f),{title:t.$t("Generate"),icon:e(B)},null,8,["title","icon"])]),_:1},8,["active","direction"])]),o(e(R),null,{default:r(()=>[a.value===1?(c(),d("div",Q,[o(e(b),{type:"success",onClick:l[1]||(l[1]=p=>I())},{default:r(()=>[q(n(t.$t("Upload")),1)]),_:1}),o(e(S)),o(e(k),{class:"upload-drag-img limit-one","file-list":m.value,"onUpdate:fileList":l[2]||(l[2]=p=>m.value=p),"list-type":"picture-card","auto-upload":!1,"on-preview":w,"on-remove":V,limit:1,drag:""},{tip:r(()=>[i("div",X,n(t.$t("UploadImg")),1),i("div",Y,n(t.$t("Hint.UploadMainReferenceImage")),1)]),default:r(()=>[o(e(G),null,{default:r(()=>[o(e(P))]),_:1})]),_:1},8,["file-list"]),o(e(F),{modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=p=>_.value=p)},{default:r(()=>[i("img",{style:{width:"100%"},src:g.value,alt:"Preview Image"},null,8,Z)]),_:1},8,["modelValue"])])):v("",!0),a.value===2?(c(),d("div",tt,[i("div",et,[o(H,{api:"/api/sift",click:M,type:"image",tip:t.$t("UploadImg"),param:{},"other-file":m.value,"other-file-name":"sample_img","exist-stash-space":""},null,8,["tip","other-file"]),i("div",ot,n(t.$t("Hint.UploadMultipleImagesForMatching")),1)])])):v("",!0),a.value===3&&u.value.length!==0?(c(),d("div",lt,[o(z,{all_names:u.value,all_results:h.value,result_desc:"相似度"},null,8,["all_names","all_results"])])):v("",!0)]),_:1})])],64))}});const pe=J(it,[["__scopeId","data-v-290a1517"]]);export{pe as default};
