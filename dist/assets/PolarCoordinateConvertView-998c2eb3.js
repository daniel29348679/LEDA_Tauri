import"./base-23d00206.js";import{E as A}from"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import{E as T}from"./el-dialog-f482d18c.js";import"./el-overlay-81162264.js";import{E as I,a as x}from"./el-steps-c8cdef54.js";import{E as k}from"./el-divider-67eeba91.js";import{a as N}from"./el-button-ded9ecc1.js";import{c as O}from"./el-main-e0dc383b.js";import{E as X}from"./el-image-viewer-1a9f012d.js";/* empty css                */import{E as S,a as Y}from"./el-form-item-62aac1b2.js";import{E as j}from"./el-slider-07e60acd.js";import"./el-input-51d05b2a.js";import{E as P}from"./el-input-number-815f9c07.js";import"./el-tooltip-4ed993c7.js";import"./el-scrollbar-e3b486eb.js";/* empty css               */import{E as q,a as R}from"./el-select-99a9cb58.js";import{E as H}from"./el-checkbox-d46297b7.js";import{d as J,g as K,o as Q,p as Z}from"./@element-plus-a8abf029.js";import{u as ee,o as F,f as U}from"./index-d07dfee2.js";import{u as le}from"./uploadFile-6ce60004.js";import{u as te}from"./stashSpace-391fdb88.js";import{S as ae}from"./StashSelect-5af938b3.js";import{R as oe}from"./ResultImgWithStash-c075e0f0.js";import{E as re}from"./index-b8931eed.js";import{y as ie,h as se,b as i,c as V,a as n,bf as m,ag as t,u as l,bI as r,S as ne,o as g,af as B,a8 as y,aN as ue,a7 as me}from"./@vue-19632928.js";import"./lodash-es-cc4652a2.js";import"./error-78e43d3e.js";import"./typescript-defaf979.js";import"./index-711061c4.js";import"./@vueuse-0d360189.js";import"./earthApi-baaacd65.js";import"./axios-439bb627.js";import"./use-dialog-b8544ca4.js";import"./event-9519ab40.js";import"./refs-e3a131a0.js";import"./vnode-18f2a975.js";import"./@ctrl-f8748455.js";import"./async-validator-dee29e8b.js";import"./index-6127babd.js";import"./index-32075738.js";import"./quasar-ff3737c6.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";import"./validator-7d68535e.js";import"./json-editor-vue3-5344cb8d.js";import"./jsoneditor-5f1e2c9e.js";import"./el-alert-65b82b76.js";import"./el-card-a6aa41d5.js";const de={class:"step-page"},pe={class:"step-nav"},ve={key:0},fe={class:"el-upload__tip"},ce={class:"el-upload__tip text-red"},ge=["src"],_e={key:1},Ee={style:{display:"flex","flex-direction":"column"}},$e={key:0},Se={class:"el-upload__tip"},Ve={key:2},kl=ie({__name:"PolarCoordinateConvertView",setup(ye){const D=ee(),G=te();se(()=>{console.log("PolarCoordinateConvert")});const s=i(1),C=le(),h=i(""),w=i(!1),u=i([]),d=i(""),_=i([]),b=i(0),p=i(0),v=i(0),f=i(0),E=i(0),$=i(!1),L=(o,e)=>{console.log(o,e)},M=o=>{h.value=o.url,w.value=!0},W=()=>{c(),s.value++},c=async()=>{const o=F();try{await C.upload("/api/draw_circle",[u.value[0]],{mode:b.value,center_x:p.value,center_y:v.value,radius:f.value,inner_r_ratio:E.value});const e=C.uploadResult;e&&(e.code!==0&&U(`API Error: ${e.code}`),d.value=e.result.result_image,p.value=e.result.center_x,v.value=e.result.center_y,f.value=e.result.radius)}catch(e){U(`${e}`)}finally{o.close()}},z=async()=>{const o=F();try{const e={center_x:p.value,center_y:v.value,radius:f.value,inner_r_ratio:E.value};$.value&&(e.folder_path=G.currentFolderPath),await C.upload("/api/polar_coordinate_convert",u.value,e);const a=C.uploadResult;if(!a)return;if(a.code!==0){U(`API Error : ${a.code}`);return}_.value=a.result.all_names,s.value++}catch(e){U(`${e}`)}finally{o.close()}};return(o,e)=>(g(),V(ne,null,[n("h4",null,m(o.$t("PolarCoordinateConvert")),1),t(l(k)),n("div",de,[n("div",pe,[t(l(x),{active:s.value,"finish-status":"success",class:"w3-margin-bottom",direction:l(D).lt.md?"horizontal":"vertical"},{default:r(()=>[t(l(I),{title:o.$t("Upload"),icon:l(J),onClick:e[0]||(e[0]=a=>(s.value=1,u.value=[],d.value="",_.value=[],b.value=0,p.value=0,v.value=0,f.value=0,E.value=0)),class:"pointer"},null,8,["title","icon"]),t(l(I),{title:o.$t("Setting"),icon:l(K),onClick:e[1]||(e[1]=a=>(u.value.length>0&&c(),s.value=u.value.length>0?2:1,_.value=[])),class:"pointer"},null,8,["title","icon"]),t(l(I),{title:o.$t("Generate"),icon:l(Q)},null,8,["title","icon"])]),_:1},8,["active","direction"])]),t(l(O),null,{default:r(()=>[s.value===1?(g(),V("div",ve,[t(l(S),{label:o.$t("Mode")},{default:r(()=>[t(l(q),{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=a=>b.value=a)},{default:r(()=>[t(l(R),{label:o.$t("WCircleBBG"),value:0},null,8,["label"]),t(l(R),{label:o.$t("BCircleWBG"),value:1},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(l(N),{type:"success",onClick:e[3]||(e[3]=a=>W())},{default:r(()=>[B(m(o.$t("Upload")),1)]),_:1}),t(l(k)),t(l(A),{class:"upload-drag-img","file-list":u.value,"onUpdate:fileList":e[4]||(e[4]=a=>u.value=a),action:"/api/percentage_crop","list-type":"picture-card","auto-upload":!1,"on-preview":M,"on-remove":L,multiple:"",drag:""},{tip:r(()=>[n("div",fe,m(o.$t("UploadImg")),1),n("div",ce,m(o.$t("StashSpaceUploadImageConfigureFirst")),1)]),default:r(()=>[t(l(re),null,{default:r(()=>[t(l(Z))]),_:1})]),_:1},8,["file-list"]),t(l(T),{modelValue:w.value,"onUpdate:modelValue":e[5]||(e[5]=a=>w.value=a)},{default:r(()=>[n("img",{style:{width:"100%"},src:h.value,alt:"Preview Image"},null,8,ge)]),_:1},8,["modelValue"])])):y("",!0),s.value===2&&d.value!==""?(g(),V("div",_e,[t(l(H),{modelValue:$.value,"onUpdate:modelValue":e[6]||(e[6]=a=>$.value=a)},{default:r(()=>[B(m(o.$t("Label.UsingTemporaryStorageSpace")),1)]),_:1},8,["modelValue"]),n("div",Ee,[$.value?(g(),V("div",$e,[t(ae,{"is-on-page":"","is-upload":""}),n("span",Se,m(o.$t("UploadImg")),1)])):y("",!0),t(l(N),{class:ue({"ml-3":$.value}),type:"success",onClick:e[7]||(e[7]=a=>z())},{default:r(()=>[B(m(o.$t("Setting")),1)]),_:1},8,["class"])]),t(l(k)),t(l(Y),{"label-width":"170px","label-position":"left"},{default:r(()=>[t(l(S),{label:o.$t("CenterX")},{default:r(()=>[t(l(P),{modelValue:p.value,"onUpdate:modelValue":e[8]||(e[8]=a=>p.value=a),min:1,onChange:e[9]||(e[9]=a=>c())},null,8,["modelValue"])]),_:1},8,["label"]),t(l(S),{label:o.$t("CenterY")},{default:r(()=>[t(l(P),{modelValue:v.value,"onUpdate:modelValue":e[10]||(e[10]=a=>v.value=a),min:1,onChange:e[11]||(e[11]=a=>c())},null,8,["modelValue"])]),_:1},8,["label"]),t(l(S),{label:o.$t("Radius")},{default:r(()=>[t(l(P),{modelValue:f.value,"onUpdate:modelValue":e[12]||(e[12]=a=>f.value=a),min:1,onChange:e[13]||(e[13]=a=>c())},null,8,["modelValue"])]),_:1},8,["label"]),t(l(S),{label:o.$t("InnerRadiusRatio")},{default:r(()=>[t(l(j),{modelValue:E.value,"onUpdate:modelValue":e[14]||(e[14]=a=>E.value=a),min:0,max:1,step:.001,onChange:e[15]||(e[15]=a=>c())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),d.value!==""?(g(),me(l(X),{key:0,style:{margin:"10px"},src:d.value,"preview-src-list":[d.value],fit:"scale-down"},null,8,["src","preview-src-list"])):y("",!0)])):y("",!0),s.value===3&&_.value.length!==0?(g(),V("div",Ve,[t(oe,{all_names:_.value},null,8,["all_names"])])):y("",!0)]),_:1})])],64))}});export{kl as default};
