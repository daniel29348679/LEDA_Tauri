import"./base-23d00206.js";import{E as se}from"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import{E as O,a as oe}from"./el-steps-c8cdef54.js";import{E as Q}from"./el-divider-67eeba91.js";import{a as X}from"./el-button-ded9ecc1.js";import{c as re}from"./el-main-e0dc383b.js";import{E as V}from"./el-image-viewer-1a9f012d.js";/* empty css                */import{a as ne,E as $}from"./el-form-item-62aac1b2.js";import{E as M}from"./el-slider-07e60acd.js";import"./el-input-51d05b2a.js";import{E as J}from"./el-input-number-815f9c07.js";import"./el-tooltip-4ed993c7.js";import"./el-scrollbar-e3b486eb.js";import{E as T}from"./el-checkbox-d46297b7.js";import{d as ue,g as ie,o as pe,h as ve}from"./@element-plus-a8abf029.js";import{u as de,o as Y,f as m,i as me}from"./index-d07dfee2.js";import{u as ce}from"./uploadFile-6ce60004.js";import{u as fe}from"./stashSpace-391fdb88.js";import{S as ge}from"./StashSelect-5af938b3.js";import{R as he}from"./ResultImgWithStash-c075e0f0.js";import{E as _e}from"./index-b8931eed.js";import{y as we,h as be,b as o,c as _,a as d,bf as w,ag as s,u as a,bI as i,S as Ve,o as p,af as W,a8 as v,aN as $e,a7 as y}from"./@vue-19632928.js";import"./lodash-es-cc4652a2.js";import"./error-78e43d3e.js";import"./typescript-defaf979.js";import"./index-711061c4.js";import"./@vueuse-0d360189.js";import"./event-9519ab40.js";import"./vnode-18f2a975.js";import"./@ctrl-f8748455.js";import"./earthApi-baaacd65.js";import"./axios-439bb627.js";import"./async-validator-dee29e8b.js";import"./index-6127babd.js";import"./index-32075738.js";import"./quasar-ff3737c6.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";/* empty css               */import"./el-select-99a9cb58.js";import"./el-overlay-81162264.js";import"./validator-7d68535e.js";import"./json-editor-vue3-5344cb8d.js";import"./jsoneditor-5f1e2c9e.js";import"./el-alert-65b82b76.js";import"./el-card-a6aa41d5.js";const ye={class:"step-page"},Ee={class:"step-nav"},Se={key:0},ke={class:"el-upload__text"},Ce={class:"el-upload__tip"},Ue={class:"el-upload__tip text-red"},xe={key:1},Ie={style:{display:"flex","flex-direction":"column"}},Re={key:0},Ne={class:"el-upload__tip"},Pe={key:0},Ae={key:1},Fe={key:2},Be={key:3},De={key:2},zl=we({__name:"EnhSegDataView",setup(Ge){const Z=de(),ee=fe();be(()=>{console.log("SEGDataEnh")});const b=o(1),u=ce(),E=o([]),x=o([]),c=o([1,1]),f=o([1,1]),g=o([1,1]),h=o([1,1]),j=o(.2),q=o(.2),H=o(.2),K=o(.2),S=o(!1),k=o(!1),C=o(!1),U=o(!1),I=o([]),R=o([]),N=o([]),P=o([]),A=o([]),F=o([]),B=o([]),D=o([]),G=o(!1),le=()=>{b.value++},ae=async t=>{t==="brightness"&&(S.value===!1?c.value=[1,1]:c.value=[.8,1.2]),t==="contrast"&&(k.value===!1?f.value=[1,1]:f.value=[.8,1.2]),t==="sharpness"&&(C.value===!1?g.value=[1,1]:g.value=[.8,1.2]),t==="color"&&(U.value===!1?h.value=[1,1]:h.value=[.8,1.2])},z=async t=>{await ae(t),await L(t)},L=async t=>{const e=Y(),l=E.value.find(r=>r.raw&&r.raw.type.includes("image"));if(!l){m(me.global.t("NoImageFile")),e.close();return}if(t==="brightness"){await u.upload("/api/enhance_img",[l],{brightness:c.value[0],contrast:1,sharpness:1,color:1});const r=u.uploadResult;if(r){if(r.code!==0){m(`API Error: ${r.code}`);return}I.value=r.result.all_names}await u.upload("/api/enhance_img",[l],{brightness:c.value[1],contrast:1,sharpness:1,color:1});const n=u.uploadResult;if(n){if(n.code!==0){m("API Error : "+n.code);return}R.value=n.result.all_names}}if(t==="contrast"){await u.upload("/api/enhance_img",[l],{brightness:1,contrast:f.value[0],sharpness:1,color:1});const r=u.uploadResult;if(r){if(r.code!==0){m(`API Error: ${r.code}`);return}N.value=r.result.all_names}await u.upload("/api/enhance_img",[l],{brightness:1,contrast:f.value[1],sharpness:1,color:1});const n=u.uploadResult;if(n){if(n.code!==0){m("API Error : "+n.code);return}P.value=n.result.all_names}}if(t==="sharpness"){await u.upload("/api/enhance_img",[l],{brightness:1,contrast:1,sharpness:g.value[0],color:1});const r=u.uploadResult;if(r){if(r.code!==0){m(`API Error: ${r.code}`);return}A.value=r.result.all_names}await u.upload("/api/enhance_img",[l],{brightness:1,contrast:1,sharpness:g.value[1],color:1});const n=u.uploadResult;if(n){if(n.code!==0){m("API Error : "+n.code);return}F.value=n.result.all_names}}if(t==="color"){await u.upload("/api/enhance_img",[l],{brightness:1,contrast:1,sharpness:1,color:h.value[0]});const r=u.uploadResult;if(r){if(r.code!==0){m(`API Error: ${r.code}`);return}B.value=r.result.all_names}await u.upload("/api/enhance_img",[l],{brightness:1,contrast:1,sharpness:1,color:h.value[1]});const n=u.uploadResult;if(n){if(n.code!==0){m("API Error : "+n.code);return}D.value=n.result.all_names}}e.close()},te=async()=>{const t=Y();try{const e={brightness_lower:c.value[0],brightness_upper:c.value[1],brightness_step:j.value,contrast_lower:f.value[0],contrast_upper:f.value[1],contrast_step:q.value,sharpness_lower:g.value[0],sharpness_upper:g.value[1],sharpness_step:H.value,color_lower:h.value[0],color_upper:h.value[1],color_step:K.value};G.value&&(e.folder_path=ee.currentFolderPath),await u.upload("/api/step_enhance_seg_img",E.value,e);const l=u.uploadResult;if(!l)return;l.code!==0&&m(`API Error: ${l.code}`),x.value=l.result.all_names,b.value++}catch(e){m(`${e}`)}finally{t.close()}};return(t,e)=>(p(),_(Ve,null,[d("h4",null,w(t.$t("SEGDataEnh")),1),s(a(Q)),d("div",ye,[d("div",Ee,[s(a(oe),{active:b.value,"finish-status":"success",class:"w3-margin-bottom",direction:a(Z).lt.md?"horizontal":"vertical"},{default:i(()=>[s(a(O),{title:t.$t("Upload"),icon:a(ue),onClick:e[0]||(e[0]=l=>(b.value=1,E.value=[],S.value=!1,k.value=!1,C.value=!1,U.value=!1,I.value=[],R.value=[],N.value=[],P.value=[],A.value=[],F.value=[],B.value=[],D.value=[],x.value=[])),class:"pointer"},null,8,["title","icon"]),s(a(O),{title:t.$t("Setting"),icon:a(ie),onClick:e[1]||(e[1]=l=>(b.value=E.value.length>0?2:1,S.value=!1,k.value=!1,C.value=!1,U.value=!1,c.value=[1,1],f.value=[1,1],g.value=[1,1],h.value=[1,1],x.value=[])),class:"pointer"},null,8,["title","icon"]),s(a(O),{title:t.$t("Generate"),icon:a(pe)},null,8,["title","icon"])]),_:1},8,["active","direction"])]),s(a(re),null,{default:i(()=>[b.value===1?(p(),_("div",Se,[s(a(X),{type:"success",onClick:e[2]||(e[2]=l=>le())},{default:i(()=>[W(w(t.$t("Upload")),1)]),_:1}),s(a(Q)),s(a(se),{"file-list":E.value,"onUpdate:fileList":e[3]||(e[3]=l=>E.value=l),class:"upload-demo",action:"/api/step_enhance_seg_img","auto-upload":!1,multiple:"",drag:""},{tip:i(()=>[d("div",Ce,w(t.$t("UploadImgJson")),1),d("div",Ue,w(t.$t("StashSpaceUploadImageConfigureFirst")),1)]),default:i(()=>[s(a(_e),{class:"el-icon--upload"},{default:i(()=>[s(a(ve))]),_:1}),d("div",ke,[W(w(t.$t("DropFile"))+" ",1),d("em",null,w(t.$t("ClickToUpload")),1)])]),_:1},8,["file-list"])])):v("",!0),b.value===2&&E.value.length!==0?(p(),_("div",xe,[s(a(T),{modelValue:G.value,"onUpdate:modelValue":e[4]||(e[4]=l=>G.value=l)},{default:i(()=>[W(w(t.$t("Label.UsingTemporaryStorageSpace")),1)]),_:1},8,["modelValue"]),d("div",Ie,[G.value?(p(),_("div",Re,[s(ge,{"is-on-page":"","is-upload":""}),d("span",Ne,w(t.$t("UploadImg")),1)])):v("",!0),s(a(X),{class:$e({"ml-3":G.value}),type:"success",onClick:e[5]||(e[5]=l=>te())},{default:i(()=>[W(w(t.$t("Setting")),1)]),_:1},8,["class"])]),s(a(Q)),s(a(ne),{"label-width":"170px","label-position":"left"},{default:i(()=>[s(a(T),{modelValue:S.value,"onUpdate:modelValue":e[6]||(e[6]=l=>S.value=l),label:t.$t("Brightness"),onChange:e[7]||(e[7]=l=>z("brightness"))},null,8,["modelValue","label"]),S.value===!0?(p(),_("div",Pe,[s(a($),{label:t.$t("BrightnessRange")},{default:i(()=>[s(a(M),{modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=l=>c.value=l),range:"",min:.5,max:1.5,step:.001,onChange:e[9]||(e[9]=l=>L("brightness"))},null,8,["modelValue"])]),_:1},8,["label"]),s(a($),{label:t.$t("Step")},{default:i(()=>[s(a(J),{modelValue:j.value,"onUpdate:modelValue":e[10]||(e[10]=l=>j.value=l),precision:2,step:.01,min:.01},null,8,["modelValue"])]),_:1},8,["label"]),I.value.length!==0?(p(),y(a(V),{key:0,style:{width:"500px",height:"500px",margin:"10px"},src:I.value[0],"preview-src-list":I.value,fit:"scale-down"},null,8,["src","preview-src-list"])):v("",!0),R.value.length!==0?(p(),y(a(V),{key:1,style:{width:"500px",height:"500px",margin:"10px"},src:R.value[0],"preview-src-list":R.value,fit:"scale-down"},null,8,["src","preview-src-list"])):v("",!0)])):v("",!0),e[26]||(e[26]=d("br",null,null,-1)),s(a(T),{modelValue:k.value,"onUpdate:modelValue":e[11]||(e[11]=l=>k.value=l),label:t.$t("Contrast"),onChange:e[12]||(e[12]=l=>z("contrast"))},null,8,["modelValue","label"]),k.value===!0?(p(),_("div",Ae,[s(a($),{label:t.$t("ContrastRange")},{default:i(()=>[s(a(M),{modelValue:f.value,"onUpdate:modelValue":e[13]||(e[13]=l=>f.value=l),range:"",min:.5,max:1.5,step:.001,onChange:e[14]||(e[14]=l=>L("contrast"))},null,8,["modelValue"])]),_:1},8,["label"]),s(a($),{label:t.$t("Step")},{default:i(()=>[s(a(J),{modelValue:q.value,"onUpdate:modelValue":e[15]||(e[15]=l=>q.value=l),precision:2,step:.01,min:.01},null,8,["modelValue"])]),_:1},8,["label"]),N.value.length!==0?(p(),y(a(V),{key:0,style:{width:"500px",height:"500px",margin:"10px"},src:N.value[0],"preview-src-list":N.value,fit:"scale-down"},null,8,["src","preview-src-list"])):v("",!0),P.value.length!==0?(p(),y(a(V),{key:1,style:{width:"500px",height:"500px",margin:"10px"},src:P.value[0],"preview-src-list":P.value,fit:"scale-down"},null,8,["src","preview-src-list"])):v("",!0)])):v("",!0),e[27]||(e[27]=d("br",null,null,-1)),s(a(T),{modelValue:C.value,"onUpdate:modelValue":e[16]||(e[16]=l=>C.value=l),label:t.$t("Sharpness"),onChange:e[17]||(e[17]=l=>z("sharpness"))},null,8,["modelValue","label"]),C.value===!0?(p(),_("div",Fe,[s(a($),{label:t.$t("SharpnessRange")},{default:i(()=>[s(a(M),{modelValue:g.value,"onUpdate:modelValue":e[18]||(e[18]=l=>g.value=l),range:"",min:.5,max:1.5,step:.001,onChange:e[19]||(e[19]=l=>L("sharpness"))},null,8,["modelValue"])]),_:1},8,["label"]),s(a($),{label:t.$t("Step")},{default:i(()=>[s(a(J),{modelValue:H.value,"onUpdate:modelValue":e[20]||(e[20]=l=>H.value=l),precision:2,step:.01,min:.01},null,8,["modelValue"])]),_:1},8,["label"]),A.value.length!==0?(p(),y(a(V),{key:0,style:{width:"500px",height:"500px",margin:"10px"},src:A.value[0],"preview-src-list":A.value,fit:"scale-down"},null,8,["src","preview-src-list"])):v("",!0),F.value.length!==0?(p(),y(a(V),{key:1,style:{width:"500px",height:"500px",margin:"10px"},src:F.value[0],"preview-src-list":F.value,fit:"scale-down"},null,8,["src","preview-src-list"])):v("",!0)])):v("",!0),e[28]||(e[28]=d("br",null,null,-1)),s(a(T),{modelValue:U.value,"onUpdate:modelValue":e[21]||(e[21]=l=>U.value=l),label:t.$t("Color"),onChange:e[22]||(e[22]=l=>z("color"))},null,8,["modelValue","label"]),U.value===!0?(p(),_("div",Be,[s(a($),{label:t.$t("ColorRange")},{default:i(()=>[s(a(M),{modelValue:h.value,"onUpdate:modelValue":e[23]||(e[23]=l=>h.value=l),range:"",min:.5,max:1.5,step:.001,onChange:e[24]||(e[24]=l=>L("color"))},null,8,["modelValue"])]),_:1},8,["label"]),s(a($),{label:t.$t("Step")},{default:i(()=>[s(a(J),{modelValue:K.value,"onUpdate:modelValue":e[25]||(e[25]=l=>K.value=l),precision:2,step:.01,min:.01},null,8,["modelValue"])]),_:1},8,["label"]),B.value.length!==0?(p(),y(a(V),{key:0,style:{width:"500px",height:"500px",margin:"10px"},src:B.value[0],"preview-src-list":B.value,fit:"scale-down"},null,8,["src","preview-src-list"])):v("",!0),D.value.length!==0?(p(),y(a(V),{key:1,style:{width:"500px",height:"500px",margin:"10px"},src:D.value[0],"preview-src-list":D.value,fit:"scale-down"},null,8,["src","preview-src-list"])):v("",!0)])):v("",!0)]),_:1})])):v("",!0),b.value===3&&x.value.length!==0?(p(),_("div",De,[s(he,{all_names:x.value},null,8,["all_names"])])):v("",!0)]),_:1})])],64))}});export{zl as default};
