import{d as u}from"./pinia-71cafef5.js";import{b as o}from"./earthApi-baaacd65.js";import{b as d}from"./@vue-19632928.js";const r="poc-od",i="ts_poc_od",_=u("app-od",()=>{const n=d({load:!1}),c=d(""),f=d(),l=async e=>{const t=await o.api.initV8OdApiInitOdPost({name:r,model_name:e});return t==null||t.data.code==null?-1:t.data.code!==0?t.data.code:await s()},s=async()=>{const e=await o.api.infoV8OdApiInfoOdGet({name:r});if(console.log("res =>",e),e===void 0||e.data.code===void 0)return-1;if(e.data.code!==0)return e.data.code;if(n.value=e.data.result,e.data.result.doing&&e.data.result.result_image){let t=localStorage.getItem(i)??"";t===""&&(t=`${Date.now()}`,localStorage.setItem(i,t)),c.value=e.data.result.result_image+`&t=${t}`}return 0};return{info:n,imgURL:c,inferResult:f,init:l,checkInfo:s,startInfer:async(e,t)=>{const a=await o.api.startLiveInferV8OdApiStartLiveInferOdPost({name:r,cam_name:e,threshold:t});return console.log("res =>",a),a===void 0||a.data.code===void 0?-1:a.data.code!==0?a.data.code:await s()},stopInfer:async()=>{const e=await o.api.stopLiveInferV8OdApiStopLiveInferOdPost({name:r});return console.log("res =>",e),e===void 0||e.data.code===void 0?-1:e.data.code!==0?e.data.code:(localStorage.removeItem(i),n.value.doing=!1,0)},getInferResult:async()=>{const e=await o.api.inferV8OdLiveResultApiInferOdLiveResultGet({name:r});return console.log("res =>",e),e===void 0||e.data.code===void 0?-1:e.data.code!==0?e.data.code:(f.value=e.data.result.last_result,0)}}});export{_ as u};
