import{b as O}from"./quasar-ff3737c6.js";import{y as T,F as U,b as m,h as J,d as L,o as u,c as f,S as w,a7 as E,bI as o,b0 as M,u as a,bf as y,a8 as h,ag as t,b1 as B,af as q,B as S,bC as C,a as d,p as K,i as W}from"./@vue-19632928.js";import"./base-23d00206.js";import{E as j}from"./el-divider-67eeba91.js";import{E as V,a as z}from"./el-steps-c8cdef54.js";/* empty css                  */import{a as P,c as G}from"./el-main-e0dc383b.js";import{a as H}from"./el-button-ded9ecc1.js";import{E as Q}from"./el-card-a6aa41d5.js";import{E as X}from"./el-input-51d05b2a.js";import{u as Y,f as N,s as Z,i as R}from"./index-d07dfee2.js";import{K as ee}from"./KonvaPaint-e9087f28.js";import{g as te,j as ae,f as oe}from"./label-61e62ece.js";import{a as le,E as se}from"./el-radio-button-3d6852d2.js";import{E as re}from"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import{E as ie}from"./el-dialog-f482d18c.js";import"./el-overlay-81162264.js";import{E as ne}from"./el-checkbox-d46297b7.js";import{E as A}from"./el-image-viewer-1a9f012d.js";import{a as D,E as ue}from"./el-row-67417f48.js";import{p as pe}from"./@element-plus-a8abf029.js";import{C as me}from"./CameraOpen-7e226201.js";import{S as ce}from"./StashSelect-5af938b3.js";import{E as de}from"./index-b8931eed.js";import{_ as fe}from"./json-editor-vue3-5344cb8d.js";import"./lodash-es-cc4652a2.js";import"./event-9519ab40.js";import"./vnode-18f2a975.js";import"./index-711061c4.js";import"./@vueuse-0d360189.js";import"./@ctrl-f8748455.js";import"./typescript-defaf979.js";import"./index-6127babd.js";import"./earthApi-baaacd65.js";import"./axios-439bb627.js";import"./index-32075738.js";import"./error-78e43d3e.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";import"./el-scrollbar-e3b486eb.js";import"./vue-drag-resize-6bf710ae.js";import"./lodash-3dc9162a.js";import"./decimal.js-d133ee8e.js";import"./use-dialog-b8544ca4.js";import"./refs-e3a131a0.js";/* empty css                */import"./el-form-item-62aac1b2.js";import"./async-validator-dee29e8b.js";import"./el-select-99a9cb58.js";/* empty css               */import"./stashSpace-391fdb88.js";import"./el-tooltip-4ed993c7.js";import"./validator-7d68535e.js";import"./jsoneditor-5f1e2c9e.js";const ve={key:0},ge={key:1},_e={key:0},ye={key:1},be=T({__name:"ImageFileSelect",props:{getInfo:{type:Function,required:!1,default:()=>{}},modeOptions:{type:Array,required:!1,default:()=>["upload","camera"]}},setup(F){U(async()=>{await k()});const b=F,i=m("upload");J(()=>{console.log("Infer Camera"),i.value=b.modeOptions[0]});const n=m(""),v=m(!1),c=m(""),g=m([]),p=m(!1),$=async s=>{let l=localStorage.getItem("outputLabel")??"";l===""&&(l=`${Date.now()}`,localStorage.setItem("outputLabel",l)),n.value=s+`&t=${l}`},k=()=>{localStorage.removeItem("outputLabel"),n.value=""};L(()=>n.value,s=>{b.getInfo(s)}),L(()=>g.value,s=>{var l;n.value=((l=s[0])==null?void 0:l.url)??""});const I=s=>{c.value=s.url,p.value=!0};return U(()=>{c.value.startsWith("blob:")&&URL.revokeObjectURL(c.value)}),(s,l)=>(u(),f(w,null,[b.modeOptions.length>1?(u(),f(w,{key:0},[b.modeOptions.length>1?(u(),E(a(se),{key:0,modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e)},{default:o(()=>[(u(!0),f(w,null,M(b.modeOptions,e=>(u(),E(a(le),{key:e,label:e},{default:o(()=>[e==="camera"?(u(),f("span",ve,y(s.$t("Camera")),1)):e==="upload"?(u(),f("span",ge,y(s.$t("Upload")),1)):h("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])):h("",!0),t(a(j))],64)):h("",!0),t(a(ue),{style:{"margin-bottom":"10px"}},{default:o(()=>[t(a(D),{span:12},{default:o(()=>[i.value==="camera"?(u(),f("div",_e,[t(me,{auto_close:"","after-open":$,"after-close":k}),B(s.$slots,"setting")])):(u(),f("div",ye,[t(a(ne),{modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value=e)},{default:o(()=>[q(y(s.$t("Label.UsingTemporaryStorageSpace")),1)]),_:1},8,["modelValue"]),S(d("div",null,[t(ce,{"is-on-page":"","is-upload":""})],512),[[C,v.value]]),S(t(a(re),{class:"upload-drag-img","file-list":g.value,"onUpdate:fileList":l[2]||(l[2]=e=>g.value=e),action:"","list-type":"picture-card","auto-upload":!1,"on-preview":I,multiple:"",drag:""},{default:o(()=>[t(a(de),null,{default:o(()=>[t(a(pe))]),_:1})]),_:1},8,["file-list"]),[[C,!v.value]]),B(s.$slots,"setting"),t(a(ie),{modelValue:p.value,"onUpdate:modelValue":l[3]||(l[3]=e=>p.value=e)},{default:o(()=>[t(a(A),{style:{width:"100%"},src:c.value,fit:"contain","preview-src-list":[c.value]},null,8,["src","preview-src-list"])]),_:1},8,["modelValue"])]))]),_:3}),n.value?(u(),E(a(D),{key:0,span:12},{default:o(()=>[d("div",null,[d("div",null,y(s.$t("Button.Preview"))+":",1),t(a(A),{style:{"max-width":"100%"},src:n.value,fit:"contain","preview-src-list":[n.value]},null,8,["src","preview-src-list"])])]),_:1})):h("",!0)]),_:3})],64))}}),he={class:"step-page"},we={class:"step-nav"},Ee={class:"code-wrap"},Se=["onClick"],Ce=T({__name:"OutputLabelView",setup(F){const b=Y(),i=m(1),n=m(""),v=m(),c=m(0),g=m(0);L(()=>n.value,async()=>{if(v.value){c.value=0,g.value=0;const{width:e,height:r}=await te(n.value,v);c.value=e,g.value=r}});const p=K({model_name:"",cam_name:"",device:"cuda",alert_area:[],labels:[],crop_position:[]}),$=W(()=>[{title:"Alert Area",content:JSON.stringify(p.alert_area,null,2)},{title:"Crop Position",content:JSON.stringify(p.crop_position,null,2)},{title:"Labels",content:JSON.stringify(p.labels,null,2)}]),k=async e=>{if(console.log(e),p.alert_area=e.map(r=>ae(r))??[],p.crop_position=e.map(r=>oe(r))??[],p.labels=e,console.log("座標資訊 => ",p.alert_area),p.alert_area.length===0){N("Please draw the alert area");return}i.value=3},I=async e=>{n.value=e};J(async()=>{console.log("EFS POC Infer")});const s=async()=>{i.value=2},l=e=>{const r=JSON.stringify(e,null,2).trimStart();navigator.clipboard.writeText(r).then(()=>{Z(R.global.t("CopyMessage.Success")),console.log("File content copied to clipboard:",r)}).catch(_=>{N(R.global.t("CopyMessage.Failed")),console.error("Failed to copy file content to clipboard:",_)})};return(e,r)=>(u(),f(w,null,[d("h4",null,y(e.$t("ElectronicFenceCoordinateOutput")),1),t(a(j)),d("div",he,[d("div",we,[t(a(z),{active:i.value,"finish-status":"success",class:"w3-margin-bottom",direction:a(b).lt.md?"horizontal":"vertical"},{default:o(()=>[t(a(V),{title:e.$t("ImageFileSettings"),onClick:r[0]||(r[0]=_=>i.value=1),class:"pointer"},{icon:o(()=>[t(O,{name:"fa-solid fa-gear",class:"w3-large"})]),_:1},8,["title"]),t(a(V),{title:e.$t("FenceSettings"),onClick:r[1]||(r[1]=_=>i.value=2),class:"pointer"},{icon:o(()=>[t(O,{name:"fa-solid fa-gear",class:"w3-large"})]),_:1},8,["title"]),t(a(V),{title:e.$t("Output"),onClick:r[2]||(r[2]=_=>i.value=3),class:"pointer"},{icon:o(()=>[t(O,{name:"fa-solid fa-gear",class:"w3-large"})]),_:1},8,["title"])]),_:1},8,["active","direction"])]),t(a(G),null,{default:o(()=>[S(d("div",{class:"camera-settings",ref_key:"contentRef",ref:v},[t(be,{"get-info":I,"mode-options":["camera"]},{setting:o(()=>[t(a(H),{class:"q-mt-sm",type:"primary",onClick:s,disabled:!n.value},{default:o(()=>[q(y(e.$t("Setting")),1)]),_:1},8,["disabled"])]),_:1})],512),[[C,i.value===1]]),S(t(a(P),null,{default:o(()=>[n.value&&c.value&&g.value?(u(),E(ee,{key:0,img:n.value,width:c.value,height:g.value,"set-info":k,"single-image":""},null,8,["img","width","height"])):h("",!0)]),_:1},512),[[C,i.value===2]]),S(t(a(P),{class:"output"},{default:o(()=>[(u(!0),f(w,null,M($.value,(_,x)=>(u(),E(a(Q),{key:x},{header:o(()=>[d("span",null,y(_.title),1)]),default:o(()=>[d("div",Ee,[t(a(X),{type:"textarea",rows:40,value:_.content,style:{width:"300px"},readonly:""},null,8,["value"]),d("a",{class:"copy-button",onClick:()=>l(_.content),type:"text"},y(e.$t("Button.Copy")),9,Se)])]),_:2},1024))),128))]),_:1},512),[[C,i.value===3]])]),_:1})])],64))}});const Pt=fe(Ce,[["__scopeId","data-v-46fb614a"]]);export{Pt as default};
