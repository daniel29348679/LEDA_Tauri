import"./base-23d00206.js";/* empty css                  */import{a as S}from"./el-main-e0dc383b.js";import{E as k,a as N}from"./el-steps-c8cdef54.js";import{E as D}from"./el-divider-67eeba91.js";import{E as v}from"./el-image-viewer-1a9f012d.js";import{E as g,a as m}from"./el-table-column-5047dc3a.js";import"./el-checkbox-d46297b7.js";import"./el-tooltip-4ed993c7.js";import"./el-scrollbar-e3b486eb.js";/* empty css               */import{a as I}from"./el-button-ded9ecc1.js";/* empty css                        */import{E as R,a as T,b as z}from"./el-dropdown-item-a7576ad2.js";import{a as C,E as x}from"./el-menu-item-f0bf8d57.js";import{d as F,o as K,b as P}from"./@element-plus-a8abf029.js";import{u as j,f as L,e as G}from"./index-d07dfee2.js";import{_ as A}from"./UploadFile.vue_vue_type_script_setup_true_lang-d804558e.js";import{u as J}from"./uploadFile-6ce60004.js";import{E as O}from"./index-b8931eed.js";import{y as X,h as q,b as c,c as h,a as i,bf as s,ag as e,u as t,bI as o,S as B,o as p,af as f,a7 as E,a8 as w,b0 as Q}from"./@vue-19632928.js";import"./lodash-es-cc4652a2.js";import"./event-9519ab40.js";import"./vnode-18f2a975.js";import"./@vueuse-0d360189.js";import"./earthApi-baaacd65.js";import"./axios-439bb627.js";import"./typescript-defaf979.js";import"./error-78e43d3e.js";import"./index-711061c4.js";import"./normalize-wheel-es-ed76fb12.js";import"./index-6127babd.js";import"./@ctrl-f8748455.js";import"./dropdown-c44bb395.js";import"./refs-e3a131a0.js";import"./quasar-ff3737c6.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";import"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import"./el-dialog-f482d18c.js";import"./el-overlay-81162264.js";import"./use-dialog-b8544ca4.js";import"./el-form-item-62aac1b2.js";import"./async-validator-dee29e8b.js";import"./StashSelect-5af938b3.js";import"./el-select-99a9cb58.js";import"./index-32075738.js";import"./el-input-51d05b2a.js";import"./stashSpace-391fdb88.js";import"./validator-7d68535e.js";import"./json-editor-vue3-5344cb8d.js";import"./jsoneditor-5f1e2c9e.js";const W={class:"step-page"},Y={class:"step-nav"},Z={key:1,style:{height:"10vh"}},tt={href:"/api/download_result"},pe=X({__name:"DataHealthView",setup(et){const H=j();q(()=>{console.log("DataHealth")});const u=c(1),M=J(),r=c(),y=c(),b=c(""),d=c("0"),U=(a,l)=>{console.log(a,l),d.value=a,console.log(d.value)},$=()=>{var l,n;const a=M.uploadResult;if(a){if(a.code!==0){L(`API Error: ${a.code}`);return}r.value=a.result,y.value=[...new Set((l=r.value)==null?void 0:l.dict_label_num.map(_=>_.label))],b.value=((n=r.value)==null?void 0:n.heatmap)??"",u.value++}},V=async a=>{const l=await G("json","/api/plot_label_heatmap",{label:a});if(l==null)return;const n=await l.data;if(n.code!==0){L(`API Error: ${n.code}`);return}b.value=n.result.heatmap};return(a,l)=>(p(),h(B,null,[i("h4",null,s(a.$t("DataHealth")),1),e(t(D)),e(t(x),{"default-active":d.value,class:"el-menu-demo w3-margin-bottom",mode:"horizontal",ellipsis:!1,onSelect:U},{default:o(()=>[e(t(C),{index:"0"},{default:o(()=>[f(s(a.$t("Kernel.OD")),1)]),_:1}),e(t(C),{index:"1"},{default:o(()=>[f(s(a.$t("Kernel.SEG")),1)]),_:1})]),_:1},8,["default-active"]),i("div",W,[i("div",Y,[e(t(N),{active:u.value,"finish-status":"success",class:"w3-margin-bottom",direction:t(H).lt.md?"horizontal":"vertical"},{default:o(()=>[e(t(k),{title:a.$t("Upload"),icon:t(F),onClick:l[0]||(l[0]=n=>u.value=1),class:"pointer"},null,8,["title","icon"]),e(t(k),{title:a.$t("Analyze"),icon:t(K),onClick:l[1]||(l[1]=n=>u.value=r.value?2:1),class:"pointer"},null,8,["title","icon"])]),_:1},8,["active","direction"])]),e(t(S),null,{default:o(()=>[u.value===1?(p(),E(t(S),{key:0},{default:o(()=>[d.value==="0"?(p(),E(A,{key:0,api:"/api/data_health_check",click:$,type:"file",tip:a.$t("UploadImgXML"),"exist-stash-space":""},null,8,["tip"])):w("",!0),d.value==="1"?(p(),E(A,{key:1,api:"/api/data_health_check_seg",click:$,type:"file",tip:a.$t("UploadImgJson"),"exist-stash-space":""},null,8,["tip"])):w("",!0)]),_:1})):w("",!0),u.value===2&&r.value?(p(),h("div",Z,[e(t(I),{type:"success"},{default:o(()=>[i("a",tt,s(a.$t("Download")),1)]),_:1}),e(t(D)),i("h4",null,s(a.$t("DataState")),1),e(t(g),{data:r.value.data_info,stripe:"",border:"",style:{width:"100%"}},{default:o(()=>[e(t(m),{prop:"state",label:"state",width:"300"}),e(t(m),{prop:"number",label:"number",width:"300"})]),_:1},8,["data"]),l[3]||(l[3]=i("br",null,null,-1)),e(t(g),{data:r.value.data_state,height:"250",stripe:"",border:"",style:{width:"100%"}},{default:o(()=>[e(t(m),{prop:"image",label:"image",width:"300"}),e(t(m),{prop:"label",label:"label",width:"300"})]),_:1},8,["data"]),l[4]||(l[4]=i("br",null,null,-1)),i("h4",null,s(a.$t("StatisticsLabels")),1),e(t(g),{data:r.value.dict_label_num,border:"",stripe:"",style:{width:"100%"}},{default:o(()=>[e(t(m),{prop:"label",label:"label",width:"300"}),e(t(m),{prop:"number",label:"number",width:"300"})]),_:1},8,["data"]),l[5]||(l[5]=i("br",null,null,-1)),i("h4",null,s(a.$t("Heatmap")),1),i("div",null,[e(t(R),{onCommand:V},{dropdown:o(()=>[e(t(T),null,{default:o(()=>[e(t(z),{command:"All"},{default:o(()=>l[2]||(l[2]=[f("All")])),_:1}),(p(!0),h(B,null,Q(y.value,(n,_)=>(p(),h("div",{key:_,class:"block"},[e(t(z),{command:n},{default:o(()=>[f(s(n),1)]),_:2},1032,["command"])]))),128))]),_:1})]),default:o(()=>[i("span",null,[e(t(I),{type:"primary"},{default:o(()=>[f(s(a.$t("ChooseLabel")),1),e(t(O),{class:"el-icon--right"},{default:o(()=>[e(t(P))]),_:1})]),_:1})])]),_:1})]),l[6]||(l[6]=i("br",null,null,-1)),e(t(v),{style:{width:"300px",height:"300px"},src:b.value,"preview-src-list":[b.value],fit:"scale-down"},null,8,["src","preview-src-list"]),l[7]||(l[7]=i("br",null,null,-1)),i("h4",null,s(a.$t("ImgSizeDistribution")),1),e(t(v),{style:{width:"350px",height:"350px"},src:r.value.image_size_distribution,"preview-src-list":[r.value.image_size_distribution],fit:"scale-down"},null,8,["src","preview-src-list"]),l[8]||(l[8]=i("br",null,null,-1)),i("h4",null,s(a.$t("LabelSizeDistribution")),1),e(t(v),{style:{width:"350px",height:"350px"},src:r.value.label_size_distribution,"preview-src-list":[r.value.label_size_distribution],fit:"scale-down"},null,8,["src","preview-src-list"]),l[9]||(l[9]=i("br",null,null,-1)),i("h4",null,s(a.$t("ImgLabelRatioDistribution")),1),e(t(v),{style:{width:"350px",height:"350px"},src:r.value.label_image_ratio_distribution,"preview-src-list":[r.value.label_image_ratio_distribution],fit:"scale-down"},null,8,["src","preview-src-list"])])):w("",!0)]),_:1})])],64))}});export{pe as default};
