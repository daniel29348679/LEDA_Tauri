import{d as u}from"./pinia-71cafef5.js";import{b as o}from"./earthApi-baaacd65.js";import{b as d}from"./@vue-19632928.js";const s="poc-od-cls",i="ts_poc_od_cls",O=u("app-od-cls",()=>{const r=d({load:!1}),c=d(""),l=d(),f=async(e,a)=>{const t=await o.api.initOdClsApiInitOdClsPost({name:s,model_name_od:e,model_name_cls:a});return t==null||t.data.code==null?-1:t.data.code!==0?t.data.code:await n()},n=async()=>{const e=await o.api.infoOdClsApiInfoOdClsGet({name:s});if(console.log("res =>",e),e===void 0||e.data.code===void 0)return-1;if(e.data.code!==0)return e.data.code;if(r.value=e.data.result,e.data.result.doing&&e.data.result.result_image){let a=localStorage.getItem(i)??"";a===""&&(a=`${Date.now()}`,localStorage.setItem(i,a)),c.value=e.data.result.result_image+`&t=${a}`}return 0};return{info:r,imgURL:c,inferResult:l,init:f,checkInfo:n,startInfer:async(e,a)=>{const t=await o.api.startLiveInferOdClsApiStartLiveInferOdClsPost({name:s,cam_name:e,threshold:a});return console.log("res =>",t),t===void 0||t.data.code===void 0?-1:t.data.code!==0?t.data.code:await n()},stopInfer:async()=>{const e=await o.api.stopLiveInferOdClsApiStopLiveInferOdClsPost({name:s});return console.log("res =>",e),e===void 0||e.data.code===void 0?-1:e.data.code!==0?e.data.code:(localStorage.removeItem(i),r.value.doing=!1,0)},getInferResult:async()=>{const e=await o.api.inferOdClsLiveResultApiInferOdClsLiveResultGet({name:s});return console.log("res =>",e),e===void 0||e.data.code===void 0?-1:e.data.code!==0?e.data.code:(l.value=e.data.result.last_result,0)}}});export{O as u};
