import"./base-23d00206.js";import{E as W,a as B}from"./el-table-column-5047dc3a.js";import"./el-checkbox-d46297b7.js";/* empty css               */import{E as C}from"./el-divider-67eeba91.js";import{c as D}from"./el-main-e0dc383b.js";import{E as N}from"./el-input-51d05b2a.js";import{E as L,a as I}from"./el-select-99a9cb58.js";import"./el-scrollbar-e3b486eb.js";/* empty css                */import{a as E,E as f}from"./el-form-item-62aac1b2.js";import{E as M}from"./el-dialog-f482d18c.js";import"./el-overlay-81162264.js";import{a as $}from"./el-button-ded9ecc1.js";import"./el-tooltip-4ed993c7.js";import{u as F,f as y,c as O,i as g,e as T}from"./index-d07dfee2.js";import{_ as P}from"./UploadFile.vue_vue_type_script_setup_true_lang-d804558e.js";import{u as A}from"./uploadFile-6ce60004.js";import{u as R}from"./weight-5b7ac0f0.js";import{y as j,h as z,b,d as H,c,u as e,S as h,a as w,bf as s,ag as a,a8 as q,bI as o,o as d,b0 as G,a7 as J,af as V,aP as K}from"./@vue-19632928.js";import"./lodash-es-cc4652a2.js";import"./error-78e43d3e.js";import"./index-b8931eed.js";import"./@vueuse-0d360189.js";import"./index-711061c4.js";import"./normalize-wheel-es-ed76fb12.js";import"./index-6127babd.js";import"./event-9519ab40.js";import"./typescript-defaf979.js";import"./earthApi-baaacd65.js";import"./axios-439bb627.js";import"./index-32075738.js";import"./async-validator-dee29e8b.js";import"./use-dialog-b8544ca4.js";import"./refs-e3a131a0.js";import"./vnode-18f2a975.js";import"./@ctrl-f8748455.js";import"./quasar-ff3737c6.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";import"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import"./@element-plus-a8abf029.js";import"./StashSelect-5af938b3.js";import"./stashSpace-391fdb88.js";import"./validator-7d68535e.js";import"./json-editor-vue3-5344cb8d.js";import"./jsoneditor-5f1e2c9e.js";const xe=j({__name:"WeightManagerView",setup(Q){const m=F(),p=R();z(()=>{console.log("WeightUploadView")});const S=A(),r=b("OD"),n=b(!1);H(()=>r.value,async t=>{p.getListdirs(t)},{immediate:!0});const u=b(""),U=()=>{const t=S.uploadResult;if(t&&t.code!==0){y(`API Error: ${t.code}`);return}},_=async t=>{await O({title:g.global.t("Button.Delete",{name:g.global.t("Weight")}),message:g.global.t("Hint.ConfirmDelete",{name:`【${t}】`}),onOk:async()=>{const i=await T("json","/api/weight/remove",{model:r.value,name:t},"DELETE");if(i!=null){if(i.data.code!==0){y(`API Error: ${i.data.code}`);return}await p.getListdirs(r.value)}}})},k=async()=>{n.value=!1,await p.getListdirs(r.value)};return(t,i)=>{const v=B;return d(),c(h,null,[e(m).gt.sm?(d(),c(h,{key:0},[w("h4",null,s(t.$t("WeightManagement")),1),a(e(C))],64)):q("",!0),a(e(D),{style:{width:"80%",minWidth:"500px",paddingTop:0}},{default:o(()=>[a(e(E),{"label-position":"left",inline:e(m).gt.sm},{default:o(()=>[a(e(f),{label:t.$t("Label.Model")},{default:o(()=>[a(e(L),{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=l=>r.value=l),placeholder:"Select"},{default:o(()=>[(d(!0),c(h,null,G(e(p).modelOptions,l=>(d(),J(e(I),{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(e(f),null,{default:o(()=>[a(e($),{type:"primary",onClick:i[1]||(i[1]=l=>n.value=!0),disabled:e(p).loading},{default:o(()=>[V(s(t.$t("Button.Upload",{name:t.$t("Weight")})),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["inline"]),a(e(W),{data:e(p).modelList,style:K({width:`${e(m).width-30}px`}),border:"",height:e(m).gt.sm?e(m).height-250:e(m).height-200},{default:o(()=>[a(v,{prop:"weightName",label:t.$t("WeightName")},{default:o(({row:l})=>[w("span",null,s(l),1)]),_:1},8,["label"]),a(v,{label:t.$t("Operations"),width:"120px"},{default:o(({row:l})=>[a(e($),{type:"danger",onClick:X=>_(l)},{default:o(()=>[V(s(t.$t("Button.Delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","style","height"]),a(e(M),{title:t.$t("Button.Upload",{name:t.$t("Weight")}),modelValue:n.value,"onUpdate:modelValue":i[3]||(i[3]=l=>n.value=l)},{default:o(()=>[a(e(E),{"label-position":"left",inline:""},{default:o(()=>[a(e(f),{label:t.$t("ModelName")},{default:o(()=>[a(e(N),{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=l=>u.value=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(P,{api:"/api/weight/upload",click:U,type:"file",file_type:"file",tip:t.$t("UploadWeight"),param:{model:r.value,name:u.value},isInlineUpload:"",isClear:"",uploaded:k},null,8,["tip","param"])]),_:1})]),_:1},8,["title","modelValue"])]),_:1})],64)}}});export{xe as default};
