import"./base-23d00206.js";import"./el-button-ded9ecc1.js";import{E as f}from"./el-divider-67eeba91.js";import{E as C}from"./el-image-viewer-1a9f012d.js";import{E as k}from"./el-form-item-62aac1b2.js";import{E as R}from"./el-input-51d05b2a.js";import{c as S}from"./el-main-e0dc383b.js";import{C as _}from"./CameraOpen-7e226201.js";import{e as w,f as g}from"./index-d07dfee2.js";import{R as B}from"./ResultImgWithStash-c075e0f0.js";import{y as A,h as N,b as i,c as s,a as l,bf as c,ag as t,u as a,bI as b,S as D,o as m,a8 as E}from"./@vue-19632928.js";import"./lodash-es-cc4652a2.js";import"./index-b8931eed.js";import"./@vueuse-0d360189.js";import"./index-711061c4.js";import"./@ctrl-f8748455.js";import"./earthApi-baaacd65.js";import"./axios-439bb627.js";import"./typescript-defaf979.js";import"./error-78e43d3e.js";import"./async-validator-dee29e8b.js";import"./index-6127babd.js";import"./event-9519ab40.js";import"./index-32075738.js";/* empty css                */import"./el-select-99a9cb58.js";import"./el-scrollbar-e3b486eb.js";/* empty css               */import"./el-row-67417f48.js";import"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import"./stashSpace-391fdb88.js";import"./pinia-71cafef5.js";import"./json-editor-vue3-5344cb8d.js";import"./jsoneditor-5f1e2c9e.js";import"./quasar-ff3737c6.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";import"./el-alert-65b82b76.js";import"./el-card-a6aa41d5.js";import"./StashSelect-5af938b3.js";import"./el-overlay-81162264.js";import"./vnode-18f2a975.js";import"./el-tooltip-4ed993c7.js";import"./@element-plus-a8abf029.js";import"./validator-7d68535e.js";const O={key:0,class:"demo-image__preview"},j={key:0,type:"success"},Mo=A({__name:"RecordView",setup(F){N(()=>{console.log("Take pictures")});const r=i(""),n=i(0),I=i([]),p=i(!1),u=i("video"),$=async e=>{let o=localStorage.getItem("ts")??"";o===""&&(o=`${Date.now()}`,localStorage.setItem("ts",o)),r.value=e+`&t=${o}`,console.log("resultImgAddress: "+r.value),I.value=[]},y=()=>{localStorage.removeItem("ts"),r.value="",v(),n.value=0},V=async()=>{const e=await w("json","/api/camera/start_record",{video_name:u.value});if(console.log("res =>",e),e==null)return;const o=await e.data;if(console.log("result =>",o),o.code!==0){g(`API Error: ${o.code}`);return}p.value=!0,n.value=0},v=async()=>{const e=await w("json","/api/camera/stop_record",void 0);if(console.log("res =>",e),e==null)return;const o=await e.data;if(console.log("result =>",o),o.code!==0){g(`API Error: ${o.code}`);return}p.value=!1,n.value=1};return(e,o)=>(m(),s(D,null,[l("h4",null,c(e.$t("RecVideo")),1),t(a(f)),t(a(S),null,{default:b(()=>[l("div",null,[t(_,{auto_close:"","after-open":$,"after-close":y}),o[5]||(o[5]=l("br",null,null,-1)),r.value!==""?(m(),s("div",O,[t(a(k),{label:e.$t("VideoName"),style:{width:"30%"}},{default:b(()=>[t(a(R),{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=d=>u.value=d),disabled:p.value},null,8,["modelValue","disabled"])]),_:1},8,["label"]),p.value?(m(),s("button",{key:0,class:"w3-btn w3-mobile w3-round w3-red",onClick:o[1]||(o[1]=d=>v())},c(e.$t("Button.Close",{name:e.$t("RecVideo")})),1)):(m(),s("button",{key:1,class:"w3-btn w3-mobile w3-round w3-theme",onClick:o[2]||(o[2]=d=>V())},c(e.$t("Button.Open",{name:e.$t("RecVideo")})),1)),o[3]||(o[3]=l("br",null,null,-1)),o[4]||(o[4]=l("br",null,null,-1)),l("div",null,[n.value>0?(m(),s("div",j,[t(B)])):E("",!0)]),t(a(f)),t(a(C),{src:r.value,"preview-src-list":[r.value],fit:"scale-down"},null,8,["src","preview-src-list"])])):E("",!0)])]),_:1})],64))}});export{Mo as default};
