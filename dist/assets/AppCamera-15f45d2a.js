import{b as C}from"./quasar-ff3737c6.js";import"./base-23d00206.js";import{E}from"./el-divider-67eeba91.js";import{E as L}from"./el-image-viewer-1a9f012d.js";import{E as $}from"./el-dialog-f482d18c.js";import"./el-overlay-81162264.js";import"./el-tooltip-4ed993c7.js";import{a as w}from"./el-scrollbar-e3b486eb.js";import{a as A,E as B}from"./el-row-67417f48.js";import{o as y,f as g}from"./index-d07dfee2.js";import{b as S}from"./earthApi-baaacd65.js";import{C as V}from"./CameraOpen-7e226201.js";import{u as I}from"./app_camera-ba436274.js";import{y as x,b as _,h as N,c as u,a as s,af as v,bf as i,ag as r,aN as D,u as a,bI as m,S as b,o as p,b0 as R,a7 as U}from"./@vue-19632928.js";import"./lodash-es-cc4652a2.js";import"./@vueuse-0d360189.js";import"./index-b8931eed.js";import"./typescript-defaf979.js";import"./use-dialog-b8544ca4.js";import"./el-button-ded9ecc1.js";import"./index-711061c4.js";import"./@ctrl-f8748455.js";import"./event-9519ab40.js";import"./refs-e3a131a0.js";import"./vnode-18f2a975.js";import"./error-78e43d3e.js";import"./index-6127babd.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./axios-439bb627.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";/* empty css                */import"./el-form-item-62aac1b2.js";import"./async-validator-dee29e8b.js";import"./el-input-51d05b2a.js";import"./index-32075738.js";import"./el-select-99a9cb58.js";/* empty css               */import"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import"./stashSpace-391fdb88.js";import"./json-editor-vue3-5344cb8d.js";import"./jsoneditor-5f1e2c9e.js";const P={class:"w3-card-4 w3-round w3-padding w3-dark-grey"},T={class:"w3-center"},z={class:"cut-text"},F={key:0,class:"display-middle"},K={class:"cut-text"},M={key:1},O=["onClick"],Mt=x({__name:"AppCamera",setup(Q){const l=I(),f=_(!1),c=_(!1),h=async()=>{await d(),c.value=!1},k=async e=>{const o=y();try{const t=await S.api.closeCameraApiCameraClosePost({name:e.name});if(!t)return;const n=t.data;if(console.log("result =>",n),n.code!==0){g(`API Error: ${n.code}`);return}localStorage.removeItem(l.cameraLocalKey(e.name)),await d()}finally{o.close()}},d=async()=>{f.value=!0;const e=y();try{const o=await l.loadCameraList();if(o!==0){g(`load camera list fail: ${o}`);return}}finally{f.value=!1,e.close()}};return N(async()=>{console.log("App Camera"),await d()}),(e,o)=>(p(),u(b,null,[s("h4",null,[v(i(e.$t("App.CameraSetting"))+" ",1),r(C,{name:"fa-solid fa-rotate",class:D(["w3-large w3-hover-text-theme cursor",f.value?"w3-spin":""]),onClick:o[0]||(o[0]=t=>d())},null,8,["class"])]),r(a(E)),s("button",{class:"w3-btn w3-round w3-theme",onClick:o[1]||(o[1]=t=>c.value=!0)},i(e.$t("Button.Create",{name:e.$t("Label.Camera")})),1),r(a($),{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=t=>c.value=t),title:e.$t("Button.Create",{name:e.$t("Label.Camera")}),"destroy-on-close":""},{default:m(()=>[r(V,{need_name:"","after-open":h})]),_:1},8,["modelValue","title"]),r(a(B),{gutter:20},{default:m(()=>[(p(!0),u(b,null,R(a(l).cameraList,(t,n)=>(p(),U(a(A),{key:n,xs:24,sm:12,md:8,lg:6,xl:4},{default:m(()=>[s("div",P,[s("div",T,[r(a(w),{content:t.name,placement:"top-end"},{default:m(()=>[s("h4",z,i(t.name),1)]),_:2},1032,["content"]),r(a(L),{style:{width:"100%"},fit:"fill",src:a(l).cameraURL(t.name),"preview-src-list":[a(l).cameraURL(t.name)],alt:t.name},null,8,["src","preview-src-list","alt"]),t.cam_type==="cv"?(p(),u("h5",F,[r(a(w),{content:t.src.toString(),placement:"top-end"},{default:m(()=>[s("span",K,i(t.src)+" Â  ",1)]),_:2},1032,["content"]),s("span",null,"("+i(t.cam_type)+") ",1)])):(p(),u("h5",M,i(t.cam_type),1)),s("button",{class:"w3-btn w3-mobile w3-round w3-red",onClick:j=>k(t)},[v(i(e.$t("Button.Close"))+" ",1),r(C,{name:"fa-solid fa-xmark"})],8,O)])])]),_:2},1024))),128))]),_:1})],64))}});export{Mt as default};
