import{d as w}from"./pinia-71cafef5.js";import{b as i}from"./earthApi-baaacd65.js";import{e as O}from"./index-d07dfee2.js";import{b as l}from"./@vue-19632928.js";const n="aoi-od",f="ts_aoi_od",b=w("app-aoi-od",()=>{const d=l({load:!1}),u=l(""),m=l(),_=async a=>{const{model_name:e,crop_m:t,crop_n:o,cls_w_h:r,alert_area:v,name:p,draw_alert_area:I,isFinal:g}=a,s=await i.api.initV8OdApiInitOdPost({model_name:e,crop_m:t,crop_n:o,cls_w_h:r,alert_area:v,draw_alert_area:I,name:p??n});return s==null||s.data.code==null?-1:s.data.code!==0?s.data.code:g?await c(p??n):0},c=async a=>{const e=a??n,t=await i.api.infoV8OdApiInfoOdGet({name:e});if(console.log("res checkInfo od =>",t),t===void 0||t.data.code===void 0)return-1;if(t.data.code!==0)return t.data.code;if(d.value=t.data.result,t.data.result.doing&&t.data.result.result_image){let o=localStorage.getItem(f)??"";o===""&&(o=`${Date.now()}`,localStorage.setItem(f,o)),u.value=t.data.result.result_image+`&t=${o}`}return 0};return{info:d,init:_,checkInfo:c,startInfer:async(a,e,t)=>{const o=t||n,r=await i.api.startLiveInferV8OdApiStartLiveInferOdPost({name:t??n,cam_name:a,threshold:e});return console.log("res =>",r),r===void 0||r.data.code===void 0?-1:r.data.code!==0?r.data.code:await c(o)},stopInfer:async a=>{const e=await O("json","/api/stop_live_infer_od",{name:a});return console.log("res =>",e),e===void 0||e.data.code===void 0?-1:e.data.code!==0?e.data.code:(localStorage.removeItem(f),d.value.doing=!1,0)},imgURL:u,getInferResult:async a=>{const e=await i.api.inferV8OdLiveResultApiInferOdLiveResultGet({name:a});return console.log("res =>",e),e===void 0||e.data.code===void 0?-1:e.data.code!==0?e.data.code:(m.value=e.data.result.last_result,0)},inferResult:m}});export{n as _,b as u};
