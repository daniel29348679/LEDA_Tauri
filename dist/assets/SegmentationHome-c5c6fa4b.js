import"./base-23d00206.js";import{E as p,a as u}from"./el-row-67417f48.js";import{E as w}from"./el-card-a6aa41d5.js";import{E}from"./el-image-viewer-1a9f012d.js";import{E as f,a as S}from"./el-skeleton-item-b52dbad9.js";import{f as d,w as k}from"./index-d07dfee2.js";import{u as C}from"./app_seg-2317d59b.js";import{Q as s}from"./QuartCard-b656d875.js";import{L as b}from"./vue-chartjs-22160128.js";import{C as x,p as I,a as L,b as R,P as A,c as B,d as H,e as N}from"./chart.js-1176e628.js";import{y as O,b as n,h as U,F as V,c as D,ag as e,bI as a,u as t,S as F,o as P,a as Q}from"./@vue-19632928.js";import{_ as T}from"./json-editor-vue3-5344cb8d.js";import"./lodash-es-cc4652a2.js";import"./typescript-defaf979.js";import"./index-b8931eed.js";import"./@vueuse-0d360189.js";import"./earthApi-baaacd65.js";import"./axios-439bb627.js";import"./quasar-ff3737c6.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";import"./@kurkle-36ca2f10.js";import"./jsoneditor-5f1e2c9e.js";const $=30,j=O({__name:"SegmentationHome",setup(K){x.register(I,L,R,A,B,H,N);let l=!1;const i=C(),r=n(""),g=n(0),_=n(0),v=n({labels:[],datasets:[]}),h=n({responsive:!0,animation:{duration:o=>o.dataIndex===$-1?600:0},animations:{},scales:{y:{beginAtZero:!0,stacked:!0}},interaction:{intersect:!1,mode:"index"}}),y=async()=>{try{let o=await i.checkInfo();if(o!==0){d(`check seg poc info fail : ${o}`);return}i.info.load||k("請先至後台設定實例分割應用"),i.info.doing&&(r.value=i.imgURL)}catch(o){d(`get live inference result fail: ${o}`)}},m=async()=>{l&&(await y(),setTimeout(()=>m(),1e3))};return U(async()=>{console.log("實例分割應用 mounted"),l=!0,await m()}),V(async()=>{console.log("實例分割應用 unmounted"),l=!1}),(o,c)=>(P(),D(F,null,[e(t(p),{gutter:16,class:"w3-margin-top"},{default:a(()=>[e(s,{title:"Counting Numbers",value:_.value,diff:"2%",color:"red",info:"since last week",icon:""},null,8,["value"]),e(s,{title:"Specification",value:g.value,diff:"0.75%",color:"green",info:"since yesterday",icon:""},null,8,["value"]),e(s,{title:"Cameras Online",value:"1",diff:"OK",color:"green",info:"All systems are",suffix:""}),e(s,{title:"Vilolations",value:"8",diff:"2%",color:"red",info:"since last week",icon:""})]),_:1}),e(t(p),{gutter:16,class:"w3-margin-top"},{default:a(()=>[e(t(u),{span:10},{default:a(()=>[e(t(w),null,{default:a(()=>[c[0]||(c[0]=Q("b",null,"Timeline Statistics",-1)),e(t(f),{rows:4,style:{height:"100%"},loading:!t(i).info.doing,throttle:500,animated:""},{default:a(()=>[e(t(b),{data:v.value,options:h.value},null,8,["data","options"])]),_:1},8,["loading"])]),_:1})]),_:1}),e(t(u),{span:14},{default:a(()=>[e(t(f),{style:{height:"100%"},loading:!t(i).info.doing||r.value==="",throttle:500,animated:""},{template:a(()=>[e(t(S),{variant:"image",style:{height:"100%"}})]),default:a(()=>[e(t(E),{style:{height:"100%"},src:r.value,"preview-src-list":[r.value]},null,8,["src","preview-src-list"])]),_:1},8,["loading"])]),_:1})]),_:1})],64))}});const Se=T(j,[["__scopeId","data-v-1812a1a2"]]);export{Se as default};
