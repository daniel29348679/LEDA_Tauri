import{d as u}from"./pinia-71cafef5.js";import{b as o}from"./earthApi-baaacd65.js";import{b as i}from"./@vue-19632928.js";const s="poc",c="ts_poc_cls",_=u("app-cls",()=>{const r=i({load:!1,model_name:"",cam_name:""}),d=i(""),l=i(""),f=async e=>{const t=await o.api.initV8ClsApiInitClsPost({name:s,model_name:e});return t==null||t.data.code==null?-1:t.data.code!==0?t.data.code:await n()},n=async()=>{const e=await o.api.infoV8ClsApiInfoClsGet({name:s});if(console.log("res =>",e),e===void 0||e.data.code===void 0)return-1;if(e.data.code!==0)return e.data.code;if(r.value=e.data.result,e.data.result.doing&&e.data.result.result_image){let t=localStorage.getItem(c)??"";t===""&&(t=`${Date.now()}`,localStorage.setItem(c,t)),d.value=e.data.result.result_image+`&t=${t}`}return 0};return{info:r,imgURL:d,inferResult:l,init:f,checkInfo:n,startInfer:async(e,t)=>{const a=await o.api.startLiveInferV8ClsApiStartLiveInferClsPost({name:s,cam_name:e,threshold:t});return console.log("res =>",a),a===void 0||a.data.code===void 0?-1:a.data.code!==0?a.data.code:await n()},stopInfer:async()=>{const e=await o.api.stopLiveInferV8ClsApiStopLiveInferClsPost({name:s});return console.log("res =>",e),e===void 0||e.data.code===void 0?-1:e.data.code!==0?e.data.code:(localStorage.removeItem(c),r.value.doing=!1,0)},getInferResult:async()=>{const e=await o.api.inferV8ClsLiveResultApiInferClsLiveResultGet({name:s});return console.log("res =>",e),e===void 0||e.data.code===void 0?-1:e.data.code!==0?e.data.code:(l.value=e.data.result.last_result,0)}}});export{_ as u};
