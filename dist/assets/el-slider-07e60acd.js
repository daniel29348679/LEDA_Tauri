import{bS as te,l as Ie,b as J,i as f,d as ie,n as ue,y as ne,p as Me,x as fe,o as C,c as p,ag as Ce,bI as we,a as q,bf as pe,u as t,aN as _,aP as G,bR as Se,A as _e,s as Fe,h as Ke,aW as Re,a7 as ce,a8 as re,S as se,b0 as me,bM as Xe}from"./@vue-19632928.js";import{b as de}from"./@vueuse-0d360189.js";import{E as Ye}from"./el-input-number-815f9c07.js";import{d as Pe,a as We}from"./el-scrollbar-e3b486eb.js";import{b as ge,d as le,u as be,_ as Le,w as $e}from"./base-23d00206.js";import{c as ke,d as Ue,e as Oe,g as Ae}from"./index-711061c4.js";import{u as je}from"./index-6127babd.js";import{U as oe,I as he,C as Ne}from"./event-9519ab40.js";import{i as ae,u as He}from"./index-b8931eed.js";import{c as R}from"./earthApi-baaacd65.js";import{d as Ee}from"./lodash-es-cc4652a2.js";import{t as Ge,d as Be}from"./error-78e43d3e.js";const Te=Symbol("sliderContextKey"),qe=ge({modelValue:{type:le([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:ke,inputSize:ke,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:le(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:le(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Pe,default:"top"},marks:{type:le(Object)},validateEvent:{type:Boolean,default:!0},...je(["ariaLabel"])}),ve=e=>ae(e)||te(e)&&e.every(ae),Je={[oe]:ve,[he]:ve,[Ne]:ve},Qe=ge({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Pe,default:"top"}}),Ze={[oe]:e=>ae(e)},De=(e,l,d)=>{const a=J(),s=J(!1),m=f(()=>l.value instanceof Function),i=f(()=>m.value&&l.value(e.modelValue)||e.modelValue),b=Ee(()=>{d.value&&(s.value=!0)},50),h=Ee(()=>{d.value&&(s.value=!1)},50);return{tooltip:a,tooltipVisible:s,formatValue:i,displayTooltip:b,hideTooltip:h}},el=(e,l,d)=>{const{disabled:a,min:s,max:m,step:i,showTooltip:b,precision:h,sliderSize:u,formatTooltip:v,emitChange:n,resetSize:k,updateDragging:L}=Ie(Te),{tooltip:z,tooltipVisible:F,formatValue:N,displayTooltip:T,hideTooltip:E}=De(e,v,b),P=J(),B=f(()=>`${(e.modelValue-s.value)/(m.value-s.value)*100}%`),X=f(()=>e.vertical?{bottom:B.value}:{left:B.value}),Y=()=>{l.hovering=!0,T()},O=()=>{l.hovering=!1,l.dragging||E()},Q=c=>{a.value||(c.preventDefault(),H(c),window.addEventListener("mousemove",x),window.addEventListener("touchmove",x),window.addEventListener("mouseup",w),window.addEventListener("touchend",w),window.addEventListener("contextmenu",w),P.value.focus())},I=c=>{a.value||(l.newPosition=Number.parseFloat(B.value)+c/(m.value-s.value)*100,M(l.newPosition),n())},Z=()=>{I(-i.value)},W=()=>{I(i.value)},r=()=>{I(-i.value*4)},V=()=>{I(i.value*4)},y=()=>{a.value||(M(0),n())},A=()=>{a.value||(M(100),n())},j=c=>{let g=!0;switch(c.code){case R.left:case R.down:Z();break;case R.right:case R.up:W();break;case R.home:y();break;case R.end:A();break;case R.pageDown:r();break;case R.pageUp:V();break;default:g=!1;break}g&&c.preventDefault()},$=c=>{let g,S;return c.type.startsWith("touch")?(S=c.touches[0].clientY,g=c.touches[0].clientX):(S=c.clientY,g=c.clientX),{clientX:g,clientY:S}},H=c=>{l.dragging=!0,l.isClick=!0;const{clientX:g,clientY:S}=$(c);e.vertical?l.startY=S:l.startX=g,l.startPosition=Number.parseFloat(B.value),l.newPosition=l.startPosition},x=c=>{if(l.dragging){l.isClick=!1,T(),k();let g;const{clientX:S,clientY:K}=$(c);e.vertical?(l.currentY=K,g=(l.startY-l.currentY)/u.value*100):(l.currentX=S,g=(l.currentX-l.startX)/u.value*100),l.newPosition=l.startPosition+g,M(l.newPosition)}},w=()=>{l.dragging&&(setTimeout(()=>{l.dragging=!1,l.hovering||E(),l.isClick||M(l.newPosition),n()},0),window.removeEventListener("mousemove",x),window.removeEventListener("touchmove",x),window.removeEventListener("mouseup",w),window.removeEventListener("touchend",w),window.removeEventListener("contextmenu",w))},M=async c=>{if(c===null||Number.isNaN(+c))return;c<0?c=0:c>100&&(c=100);const g=100/((m.value-s.value)/i.value);let K=Math.round(c/g)*g*(m.value-s.value)*.01+s.value;K=Number.parseFloat(K.toFixed(h.value)),K!==e.modelValue&&d(oe,K),!l.dragging&&e.modelValue!==l.oldValue&&(l.oldValue=e.modelValue),await ue(),l.dragging&&T(),z.value.updatePopper()};return ie(()=>l.dragging,c=>{L(c)}),de(P,"touchstart",Q,{passive:!1}),{disabled:a,button:P,tooltip:z,tooltipVisible:F,showTooltip:b,wrapperStyle:X,formatValue:N,handleMouseEnter:Y,handleMouseLeave:O,onButtonDown:Q,onKeyDown:j,setPosition:M}},ll=ne({name:"ElSliderButton"}),tl=ne({...ll,props:Qe,emits:Ze,setup(e,{expose:l,emit:d}){const a=e,s=be("slider"),m=Me({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),{disabled:i,button:b,tooltip:h,showTooltip:u,tooltipVisible:v,wrapperStyle:n,formatValue:k,handleMouseEnter:L,handleMouseLeave:z,onButtonDown:F,onKeyDown:N,setPosition:T}=el(a,m,d),{hovering:E,dragging:P}=fe(m);return l({onButtonDown:F,onKeyDown:N,setPosition:T,hovering:E,dragging:P}),(B,X)=>(C(),p("div",{ref_key:"button",ref:b,class:_([t(s).e("button-wrapper"),{hover:t(E),dragging:t(P)}]),style:G(t(n)),tabindex:t(i)?-1:0,onMouseenter:t(L),onMouseleave:t(z),onMousedown:t(F),onFocus:t(L),onBlur:t(z),onKeydown:t(N)},[Ce(t(We),{ref_key:"tooltip",ref:h,visible:t(v),placement:B.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":B.tooltipClass,disabled:!t(u),persistent:t(u)},{content:we(()=>[q("span",null,pe(t(k)),1)]),default:we(()=>[q("div",{class:_([t(s).e("button"),{hover:t(E),dragging:t(P)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var xe=Le(tl,[["__file","button.vue"]]);const al=ge({mark:{type:le([String,Object]),default:void 0}});var nl=ne({name:"ElSliderMarker",props:al,setup(e){const l=be("slider"),d=f(()=>Se(e.mark)?e.mark:e.mark.label),a=f(()=>Se(e.mark)?void 0:e.mark.style);return()=>_e("div",{class:l.e("marks-text"),style:a.value},d.value)}});const ol=(e,l,d)=>{const{form:a,formItem:s}=Ue(),m=Fe(),i=J(),b=J(),h={firstButton:i,secondButton:b},u=f(()=>e.disabled||(a==null?void 0:a.disabled)||!1),v=f(()=>Math.min(l.firstValue,l.secondValue)),n=f(()=>Math.max(l.firstValue,l.secondValue)),k=f(()=>e.range?`${100*(n.value-v.value)/(e.max-e.min)}%`:`${100*(l.firstValue-e.min)/(e.max-e.min)}%`),L=f(()=>e.range?`${100*(v.value-e.min)/(e.max-e.min)}%`:"0%"),z=f(()=>e.vertical?{height:e.height}:{}),F=f(()=>e.vertical?{height:k.value,bottom:L.value}:{width:k.value,left:L.value}),N=()=>{m.value&&(l.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},T=r=>{const V=e.min+r*(e.max-e.min)/100;if(!e.range)return i;let y;return Math.abs(v.value-V)<Math.abs(n.value-V)?y=l.firstValue<l.secondValue?"firstButton":"secondButton":y=l.firstValue>l.secondValue?"firstButton":"secondButton",h[y]},E=r=>{const V=T(r);return V.value.setPosition(r),V},P=r=>{l.firstValue=r??e.min,X(e.range?[v.value,n.value]:r??e.min)},B=r=>{l.secondValue=r,e.range&&X([v.value,n.value])},X=r=>{d(oe,r),d(he,r)},Y=async()=>{await ue(),d(Ne,e.range?[v.value,n.value]:e.modelValue)},O=r=>{var V,y,A,j,$,H;if(u.value||l.dragging)return;N();let x=0;if(e.vertical){const w=(A=(y=(V=r.touches)==null?void 0:V.item(0))==null?void 0:y.clientY)!=null?A:r.clientY;x=(m.value.getBoundingClientRect().bottom-w)/l.sliderSize*100}else{const w=(H=($=(j=r.touches)==null?void 0:j.item(0))==null?void 0:$.clientX)!=null?H:r.clientX,M=m.value.getBoundingClientRect().left;x=(w-M)/l.sliderSize*100}if(!(x<0||x>100))return E(x)};return{elFormItem:s,slider:m,firstButton:i,secondButton:b,sliderDisabled:u,minValue:v,maxValue:n,runwayStyle:z,barStyle:F,resetSize:N,setPosition:E,emitChange:Y,onSliderWrapperPrevent:r=>{var V,y;((V=h.firstButton.value)!=null&&V.dragging||(y=h.secondButton.value)!=null&&y.dragging)&&r.preventDefault()},onSliderClick:r=>{O(r)&&Y()},onSliderDown:async r=>{const V=O(r);V&&(await ue(),V.value.onButtonDown(r))},onSliderMarkerDown:r=>{u.value||l.dragging||E(r)},setFirstValue:P,setSecondValue:B}},rl=(e,l,d,a)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,b=100*e.step/(e.max-e.min),h=Array.from({length:i-1}).map((u,v)=>(v+1)*b);return e.range?h.filter(u=>u<100*(d.value-e.min)/(e.max-e.min)||u>100*(a.value-e.min)/(e.max-e.min)):h.filter(u=>u>100*(l.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),sl=e=>f(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,a)=>d-a).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),il=(e,l,d,a,s,m)=>{const i=u=>{s(oe,u),s(he,u)},b=()=>e.range?![d.value,a.value].every((u,v)=>u===l.oldValue[v]):e.modelValue!==l.oldValue,h=()=>{var u,v;e.min>e.max&&Ge("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&te(n)?n[1]<e.min?i([e.min,e.min]):n[0]>e.max?i([e.max,e.max]):n[0]<e.min?i([e.min,n[1]]):n[1]>e.max?i([n[0],e.max]):(l.firstValue=n[0],l.secondValue=n[1],b()&&(e.validateEvent&&((u=m==null?void 0:m.validate)==null||u.call(m,"change").catch(k=>Be())),l.oldValue=n.slice())):!e.range&&ae(n)&&!Number.isNaN(n)&&(n<e.min?i(e.min):n>e.max?i(e.max):(l.firstValue=n,b()&&(e.validateEvent&&((v=m==null?void 0:m.validate)==null||v.call(m,"change").catch(k=>Be())),l.oldValue=n)))};h(),ie(()=>l.dragging,u=>{u||h()}),ie(()=>e.modelValue,(u,v)=>{l.dragging||te(u)&&te(v)&&u.every((n,k)=>n===v[k])&&l.firstValue===u[0]&&l.secondValue===u[1]||h()},{deep:!0}),ie(()=>[e.min,e.max],()=>{h()})},ul=(e,l,d)=>{const a=J();return Ke(async()=>{e.range?(te(e.modelValue)?(l.firstValue=Math.max(e.min,e.modelValue[0]),l.secondValue=Math.min(e.max,e.modelValue[1])):(l.firstValue=e.min,l.secondValue=e.max),l.oldValue=[l.firstValue,l.secondValue]):(!ae(e.modelValue)||Number.isNaN(e.modelValue)?l.firstValue=e.min:l.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),l.oldValue=l.firstValue),de(window,"resize",d),await ue(),d()}),{sliderWrapper:a}},dl=ne({name:"ElSlider"}),cl=ne({...dl,props:qe,emits:Je,setup(e,{expose:l,emit:d}){const a=e,s=be("slider"),{t:m}=He(),i=Me({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:b,slider:h,firstButton:u,secondButton:v,sliderDisabled:n,minValue:k,maxValue:L,runwayStyle:z,barStyle:F,resetSize:N,emitChange:T,onSliderWrapperPrevent:E,onSliderClick:P,onSliderDown:B,onSliderMarkerDown:X,setFirstValue:Y,setSecondValue:O}=ol(a,i,d),{stops:Q,getStopStyle:I}=rl(a,i,k,L),{inputId:Z,isLabeledByFormItem:W}=Oe(a,{formItemContext:b}),r=Ae(),V=f(()=>a.inputSize||r.value),y=f(()=>a.ariaLabel||m("el.slider.defaultLabel",{min:a.min,max:a.max})),A=f(()=>a.range?a.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):y.value),j=f(()=>a.formatValueText?a.formatValueText(g.value):`${g.value}`),$=f(()=>a.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),H=f(()=>a.formatValueText?a.formatValueText(S.value):`${S.value}`),x=f(()=>[s.b(),s.m(r.value),s.is("vertical",a.vertical),{[s.m("with-input")]:a.showInput}]),w=sl(a);il(a,i,k,L,d,b);const M=f(()=>{const o=[a.min,a.max,a.step].map(Ve=>{const D=`${Ve}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,o)}),{sliderWrapper:c}=ul(a,i,N),{firstValue:g,secondValue:S,sliderSize:K}=fe(i),ze=o=>{i.dragging=o};return de(c,"touchstart",E,{passive:!1}),de(c,"touchmove",E,{passive:!1}),Re(Te,{...fe(a),sliderSize:K,disabled:n,precision:M,emitChange:T,resetSize:N,updateDragging:ze}),l({onSliderClick:P}),(o,Ve)=>{var D,ye;return C(),p("div",{id:o.range?t(Z):void 0,ref_key:"sliderWrapper",ref:c,class:_(t(x)),role:o.range?"group":void 0,"aria-label":o.range&&!t(W)?t(y):void 0,"aria-labelledby":o.range&&t(W)?(D=t(b))==null?void 0:D.labelId:void 0},[q("div",{ref_key:"slider",ref:h,class:_([t(s).e("runway"),{"show-input":o.showInput&&!o.range},t(s).is("disabled",t(n))]),style:G(t(z)),onMousedown:t(B),onTouchstartPassive:t(B)},[q("div",{class:_(t(s).e("bar")),style:G(t(F))},null,6),Ce(xe,{id:o.range?void 0:t(Z),ref_key:"firstButton",ref:u,"model-value":t(g),vertical:o.vertical,"tooltip-class":o.tooltipClass,placement:o.placement,role:"slider","aria-label":o.range||!t(W)?t(A):void 0,"aria-labelledby":!o.range&&t(W)?(ye=t(b))==null?void 0:ye.labelId:void 0,"aria-valuemin":o.min,"aria-valuemax":o.range?t(S):o.max,"aria-valuenow":t(g),"aria-valuetext":t(j),"aria-orientation":o.vertical?"vertical":"horizontal","aria-disabled":t(n),"onUpdate:modelValue":t(Y)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),o.range?(C(),ce(xe,{key:0,ref_key:"secondButton",ref:v,"model-value":t(S),vertical:o.vertical,"tooltip-class":o.tooltipClass,placement:o.placement,role:"slider","aria-label":t($),"aria-valuemin":t(g),"aria-valuemax":o.max,"aria-valuenow":t(S),"aria-valuetext":t(H),"aria-orientation":o.vertical?"vertical":"horizontal","aria-disabled":t(n),"onUpdate:modelValue":t(O)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):re("v-if",!0),o.showStops?(C(),p("div",{key:1},[(C(!0),p(se,null,me(t(Q),(U,ee)=>(C(),p("div",{key:ee,class:_(t(s).e("stop")),style:G(t(I)(U))},null,6))),128))])):re("v-if",!0),t(w).length>0?(C(),p(se,{key:2},[q("div",null,[(C(!0),p(se,null,me(t(w),(U,ee)=>(C(),p("div",{key:ee,style:G(t(I)(U.position)),class:_([t(s).e("stop"),t(s).e("marks-stop")])},null,6))),128))]),q("div",{class:_(t(s).e("marks"))},[(C(!0),p(se,null,me(t(w),(U,ee)=>(C(),ce(t(nl),{key:ee,mark:U.mark,style:G(t(I)(U.position)),onMousedown:Xe(vl=>t(X)(U.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):re("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),o.showInput&&!o.range?(C(),ce(t(Ye),{key:0,ref:"input","model-value":t(g),class:_(t(s).e("input")),step:o.step,disabled:t(n),controls:o.showInputControls,min:o.min,max:o.max,precision:t(M),debounce:o.debounce,size:t(V),"onUpdate:modelValue":t(Y),onChange:t(T)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):re("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var ml=Le(cl,[["__file","slider.vue"]]);const Ml=$e(ml);export{Ml as E};
