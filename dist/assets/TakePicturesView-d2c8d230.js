import"./base-23d00206.js";import{a as g}from"./el-button-ded9ecc1.js";import{E as _}from"./el-divider-67eeba91.js";import{E as I}from"./el-image-viewer-1a9f012d.js";import{E as b}from"./el-alert-65b82b76.js";import{E as k,a as T}from"./el-steps-c8cdef54.js";import{c as B}from"./el-main-e0dc383b.js";import{C as P}from"./CameraOpen-7e226201.js";import{u as V,e as h,f as A}from"./index-d07dfee2.js";import{R as N}from"./ResultImgWithStash-c075e0f0.js";import{d as D,o as G}from"./@element-plus-a8abf029.js";import{y as M,h as R,b as u,c,a as s,bf as f,ag as r,u as e,bI as d,S as j,o as l,a7 as y,af as E,a8 as m}from"./@vue-19632928.js";import"./lodash-es-cc4652a2.js";import"./index-b8931eed.js";import"./@vueuse-0d360189.js";import"./index-711061c4.js";import"./@ctrl-f8748455.js";import"./earthApi-baaacd65.js";import"./axios-439bb627.js";import"./typescript-defaf979.js";import"./event-9519ab40.js";import"./vnode-18f2a975.js";/* empty css                */import"./el-form-item-62aac1b2.js";import"./error-78e43d3e.js";import"./async-validator-dee29e8b.js";import"./el-input-51d05b2a.js";import"./index-6127babd.js";import"./index-32075738.js";import"./el-select-99a9cb58.js";import"./el-scrollbar-e3b486eb.js";/* empty css               */import"./el-row-67417f48.js";import"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import"./stashSpace-391fdb88.js";import"./pinia-71cafef5.js";import"./json-editor-vue3-5344cb8d.js";import"./jsoneditor-5f1e2c9e.js";import"./quasar-ff3737c6.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";import"./el-card-a6aa41d5.js";import"./StashSelect-5af938b3.js";import"./el-overlay-81162264.js";import"./el-tooltip-4ed993c7.js";import"./validator-7d68535e.js";const z={class:"step-page"},F={class:"step-nav"},O={key:0},W={class:"demo-image__preview"},q={key:0},H={key:1},Kt=M({__name:"TakePicturesView",setup(J){const C=V();R(()=>{console.log("Take pictures")});const i=u(1),a=u(""),n=u(0),p=u([]),$=async o=>{let t=localStorage.getItem("ts")??"";t===""&&(t=`${Date.now()}`,localStorage.setItem("ts",t)),a.value=o+`&t=${t}`,console.log("resultImgAddress: "+a.value),p.value=[]},S=()=>{localStorage.removeItem("ts"),a.value="",n.value=0},w=async()=>{const o=await h("json","/api/camera/capture",void 0);if(console.log("res =>",o),o==null)return;const t=await o.data;if(console.log("result =>",t),t.code!==0){A(`API Error: ${t.code}`);return}p.value=t.result.all_names,n.value++,console.log("img_num =>",n)};return(o,t)=>(l(),c(j,null,[s("h4",null,f(o.$t("TakePic")),1),r(e(_)),s("div",z,[s("div",F,[r(e(T),{active:i.value,"finish-status":"success",class:"w3-margin-bottom",direction:e(C).lt.md?"horizontal":"vertical"},{default:d(()=>[r(e(k),{title:o.$t("TakePic"),icon:e(D),onClick:t[0]||(t[0]=v=>i.value=1),class:"pointer"},null,8,["title","icon"]),r(e(k),{title:o.$t("Generate"),icon:e(G),onClick:t[1]||(t[1]=v=>i.value=p.value.length>0?2:1),class:"pointer"},null,8,["title","icon"])]),_:1},8,["active","direction"])]),r(e(B),null,{default:d(()=>[i.value===1?(l(),c("div",O,[r(P,{auto_close:"",isCapture:"","after-open":$,"after-close":S}),t[5]||(t[5]=s("br",null,null,-1)),s("div",W,[a.value!==""?(l(),c("div",q,[a.value!==""?(l(),y(e(g),{key:0,type:"primary",onClick:t[2]||(t[2]=v=>w())},{default:d(()=>[E(f(o.$t("TakePic")),1)]),_:1})):m("",!0),a.value!==""?(l(),y(e(g),{key:1,class:"ml-3",type:"primary",onClick:t[3]||(t[3]=v=>i.value=2)},{default:d(()=>[E(f(o.$t("Generate")),1)]),_:1})):m("",!0),r(e(_)),r(e(b),{title:"Images:"+n.value,type:"success",closable:!1},null,8,["title"]),t[4]||(t[4]=s("br",null,null,-1)),r(e(I),{src:a.value,"preview-src-list":[a.value],fit:"scale-down"},null,8,["src","preview-src-list"])])):m("",!0)])])):m("",!0),i.value===2?(l(),c("div",H,[r(N,{all_names:p.value},null,8,["all_names"])])):m("",!0)]),_:1})])],64))}});export{Kt as default};
