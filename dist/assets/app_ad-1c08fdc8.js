import{d as v}from"./pinia-71cafef5.js";import{b as o}from"./earthApi-baaacd65.js";import{b as c}from"./@vue-19632928.js";const r="poc-ad",f="ts_poc_ad",L=v("app-ad",()=>{const n=c({load:!1}),l=c(""),u=c(""),p=async(e,a,d,i)=>{const t=await o.api.initAdApiInitAdPost({name:r,model_name:e,device:a,crop_m:d,crop_n:i});return t==null||t.data.code==null?-1:t.data.code!==0?t.data.code:await s()},s=async()=>{const e=await o.api.infoAdApiInfoAdGet({name:r});if(console.log("res =>",e),e===void 0||e.data.code===void 0)return-1;if(e.data.code!==0)return e.data.code;if(n.value=e.data.result,e.data.result.doing&&e.data.result.result_image){let a=localStorage.getItem(f)??"";a===""&&(a=`${Date.now()}`,localStorage.setItem(f,a)),l.value=e.data.result.result_image+`&t=${a}`}return 0};return{info:n,imgURL:l,inferResult:u,init:p,checkInfo:s,startInfer:async(e,a,d,i)=>{const t=await o.api.startLiveInferAdApiStartLiveInferAdPost({name:r,cam_name:e,threshold:a,draw_box:d,score_type:i});return console.log("res =>",t),t===void 0||t.data.code===void 0?-1:t.data.code!==0?t.data.code:await s()},stopInfer:async()=>{const e=await o.api.stopLiveInferAdApiStopLiveInferAdPost({name:r});return console.log("res =>",e),e===void 0||e.data.code===void 0?-1:e.data.code!==0?e.data.code:(localStorage.removeItem(f),n.value.doing=!1,0)},getInferResult:async()=>{const e=await o.api.inferAdLiveResultApiInferAdLiveResultGet({name:r});return console.log("res =>",e),e===void 0||e.data.code===void 0?-1:e.data.code!==0?e.data.code:(u.value=e.data.result.last_result,0)}}});export{L as u};
