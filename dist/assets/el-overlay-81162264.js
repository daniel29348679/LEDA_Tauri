import{bQ as y,y as I,ag as D,b1 as E,A as N,h as A,w as $,C as U,q as j,i as q,d as F,e as K}from"./@vue-19632928.js";import{P as h}from"./vnode-18f2a975.js";import{b as Q,d as x,u as Y}from"./base-23d00206.js";import{a as k,h as L,b as V,o as G,r as J}from"./index-b8931eed.js";import{t as Z}from"./error-78e43d3e.js";import{g as _}from"./earthApi-baaacd65.js";import{i as R}from"./@vueuse-0d360189.js";const ee=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let t=!1,n=!1;return{onClick:o=>{t&&n&&e(o),t=n=!1},onMousedown:o=>{t=o.target===o.currentTarget},onMouseup:o=>{n=o.target===o.currentTarget}}},oe=Q({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:x([String,Array,Object])},zIndex:{type:x([String,Number])}}),te={click:e=>e instanceof MouseEvent},ne="overlay";var se=I({name:"ElOverlay",props:oe,emits:te,setup(e,{slots:t,emit:n}){const s=Y(ne),a=u=>{n("click",u)},{onClick:c,onMousedown:o,onMouseup:l}=ee(e.customMaskEvent?void 0:a);return()=>e.mask?D("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:o,onMouseup:l},[E(t,"default")],h.STYLE|h.CLASS|h.PROPS,["onClick","onMouseup","onMousedown"]):N("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[E(t,"default")])}});const me=se,fe=(e,t,n,s)=>{let a={offsetX:0,offsetY:0};const c=i=>{const f=i.clientX,O=i.clientY,{offsetX:v,offsetY:p}=a,r=e.value.getBoundingClientRect(),b=r.left,g=r.top,S=r.width,T=r.height,P=document.documentElement.clientWidth,X=document.documentElement.clientHeight,B=-b+v,H=-g+p,W=P-b-S+v,z=X-g-T+p,w=C=>{let d=v+C.clientX-f,m=p+C.clientY-O;s!=null&&s.value||(d=Math.min(Math.max(d,B),W),m=Math.min(Math.max(m,H),z)),a={offsetX:d,offsetY:m},e.value&&(e.value.style.transform=`translate(${k(d)}, ${k(m)})`)},M=()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",M)},o=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",c)},l=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",c)},u=()=>{a={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return A(()=>{$(()=>{n.value?o():l()})}),U(()=>{l()}),{resetPosition:u}},ve=(e,t={})=>{j(e)||Z("[useLockscreen]","You need to pass a ref param to this function");const n=t.ns||Y("popup"),s=q(()=>n.bm("parent","hidden"));if(!R||L(document.body,s.value))return;let a=0,c=!1,o="0";const l=()=>{setTimeout(()=>{typeof document>"u"||c&&document&&(document.body.style.width=o,J(document.body,s.value))},200)};F(e,u=>{if(!u){l();return}c=!L(document.body,s.value),c&&(o=document.body.style.width,V(document.body,s.value)),a=_(n.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=G(document.body,"overflowY");a>0&&(i||f==="scroll")&&c&&(document.body.style.width=`calc(100% - ${a}px)`)}),K(()=>l())};export{me as E,ve as a,ee as b,fe as u};
