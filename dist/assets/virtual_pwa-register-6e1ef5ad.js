import{_ as w}from"./index-d07dfee2.js";import"./@vue-19632928.js";import"./quasar-ff3737c6.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./axios-439bb627.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";function j(m={}){const{immediate:c=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:a,onRegisteredSW:l,onRegisterError:d}=m;let e,p,r;const u=async(f=!0)=>{await p,await(r==null?void 0:r())};async function g(){if("serviceWorker"in navigator){const{Workbox:f}=await w(()=>import("./workbox-window-42ea5fe7.js"),[]);e=new f("/sw.js",{scope:"/",type:"classic"}),r=async()=>{await(e==null?void 0:e.messageSkipWaiting())};{let i=!1;const n=()=>{i=!0,e==null||e.addEventListener("controlling",t=>{t.isUpdate&&window.location.reload()}),s==null||s()};e.addEventListener("installed",t=>{typeof t.isUpdate>"u"?typeof t.isExternal<"u"?t.isExternal?n():!i&&(o==null||o()):t.isExternal?window.location.reload():!i&&(o==null||o()):t.isUpdate||o==null||o()}),e.addEventListener("waiting",n),e.addEventListener("externalwaiting",n)}e.register({immediate:c}).then(i=>{l?l("/sw.js",i):a==null||a(i)}).catch(i=>{d==null||d(i)})}}return p=g(),u}export{j as registerSW};
