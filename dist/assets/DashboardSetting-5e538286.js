import{f as i}from"./index-d07dfee2.js";import"./base-23d00206.js";import{E}from"./el-checkbox-d46297b7.js";import{E as c}from"./el-divider-67eeba91.js";import{E as V}from"./el-image-viewer-1a9f012d.js";import{E as k}from"./el-input-51d05b2a.js";import{a as B}from"./el-button-ded9ecc1.js";import{u as S}from"./dashboard-f7b44aa1.js";import{y as D,b as L,h as U,c as p,a as s,bf as a,ag as d,bI as g,u as r,S as b,b0 as C,a8 as T,o as m,af as h}from"./@vue-19632928.js";import"./quasar-ff3737c6.js";import"./pinia-71cafef5.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./axios-439bb627.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";import"./lodash-es-cc4652a2.js";import"./index-711061c4.js";import"./@vueuse-0d360189.js";import"./index-6127babd.js";import"./event-9519ab40.js";import"./index-b8931eed.js";import"./error-78e43d3e.js";import"./earthApi-baaacd65.js";import"./typescript-defaf979.js";import"./index-32075738.js";import"./@ctrl-f8748455.js";const A={class:"w3-margin-bottom"},x={key:0,for:"logo-file",class:"w3-btn w3-round w3-indigo"},F={key:1,class:"w3-padding w3-border w3-border-gray w3-center",style:{width:"260px","max-width":"260px","min-width":"260px"}},ce=D({__name:"DashboardSetting",setup(I){const f=S(),l=L(""),w=async e=>{const t=e.target.files;if(!(!t||t.length===0))try{const o=new FormData;for(const u of t){const v=await u.arrayBuffer();o.append("image",new Blob([v]))}const n=await fetch("/api/dashboard/logo",{method:"POST",body:o});n&&n.status==200?l.value="/api/dashboard/logo":i(`upload failed ${n.statusText} (${n.status})`)}catch(o){i(`upload failed ${o}`)}},$=async()=>{try{const e=await fetch("/api/dashboard/logo",{method:"DELETE"});e&&e.status==200?l.value="":i(`remove logo failed ${e.statusText} (${e.status})`)}catch(e){i(`${e}`)}},y=async()=>{try{const e=await fetch("/api/dashboard/logo");console.log("res = ",e),e&&e.status===200?l.value="/api/dashboard/logo":e.status===404?l.value="":i(`get logo failed ${e.statusText} (${e.status})`)}catch(e){i(`${e}`)}};return U(async()=>{await y()}),(e,t)=>(m(),p(b,null,[s("h4",null,a(e.$t("App.DashboardSetting")),1),d(r(B),{onClick:t[0]||(t[0]=o=>r(f).save()),type:"primary"},{default:g(()=>[h(a(e.$t("Button.Save")),1)]),_:1}),d(r(c)),s("div",null,[s("b",null,a(e.$t("App.FrontendApps")),1)]),(m(!0),p(b,null,C(r(f).items,(o,n)=>(m(),p("div",{key:n},[d(r(E),{label:e.$t(o.name),modelValue:o.enable,"onUpdate:modelValue":u=>o.enable=u},{default:g(()=>[s("span",null,a(e.$t(o.name))+" | ",1),h(" "+a(e.$t("App.FrontendShowText"))+" ",1),d(r(k),{modelValue:o.text,"onUpdate:modelValue":u=>o.text=u,placeholder:e.$t(o.name)},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","modelValue","onUpdate:modelValue"])]))),128)),d(r(c)),s("div",A,[s("b",null,a(e.$t("App.LogoImg")),1),l.value?(m(),p("button",{key:0,class:"w3-margin-left w3-btn w3-round w3-red",onClick:t[1]||(t[1]=o=>$())},a(e.$t("Button.Remove")),1)):T("",!0)]),l.value===""?(m(),p("label",x,a(e.$t("Button.Upload",{name:e.$t("Label.Picture")})),1)):(m(),p("div",F,[d(r(V),{src:l.value},null,8,["src"])])),s("input",{class:"w3-hide",id:"logo-file",type:"file",accept:"image/*",onChange:w},null,32)],64))}});export{ce as default};
