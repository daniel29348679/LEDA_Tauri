import{b as y}from"./quasar-ff3737c6.js";import{y as z,h as L,b as p,p as _,c as $,a as b,bf as c,ag as l,u as t,bI as r,S as k,o as s,a7 as d,b0 as q,af as h,a8 as I,B as V,bC as C}from"./@vue-19632928.js";import"./base-23d00206.js";import{a as G}from"./el-button-ded9ecc1.js";/* empty css                */import{a as H,E as S}from"./el-form-item-62aac1b2.js";/* empty css               */import{E as K,a as O}from"./el-select-99a9cb58.js";import"./el-scrollbar-e3b486eb.js";import{E as F,a as Q}from"./el-steps-c8cdef54.js";/* empty css                  */import{a as v,E as T}from"./el-main-e0dc383b.js";import{E as W}from"./el-alert-65b82b76.js";import{E as J,a as N}from"./el-radio-button-3d6852d2.js";import{E as X}from"./el-divider-67eeba91.js";import{I as Y}from"./InferImg-e3b2bb14.js";import{_ as Z}from"./InferCamera.vue_vue_type_script_setup_true_lang-05a521fb.js";import{u as x,i as B,e as P,f as U,o as ee}from"./index-d07dfee2.js";import"./lodash-es-cc4652a2.js";import"./index-b8931eed.js";import"./@vueuse-0d360189.js";import"./index-711061c4.js";import"./@ctrl-f8748455.js";import"./error-78e43d3e.js";import"./async-validator-dee29e8b.js";import"./index-32075738.js";import"./earthApi-baaacd65.js";import"./axios-439bb627.js";import"./event-9519ab40.js";import"./index-6127babd.js";import"./vnode-18f2a975.js";import"./el-popover-74fee5eb.js";import"./dropdown-c44bb395.js";import"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import"./typescript-defaf979.js";import"./el-dialog-f482d18c.js";import"./el-overlay-81162264.js";import"./use-dialog-b8544ca4.js";import"./refs-e3a131a0.js";import"./el-image-viewer-1a9f012d.js";import"./el-table-column-5047dc3a.js";import"./el-checkbox-d46297b7.js";import"./normalize-wheel-es-ed76fb12.js";import"./el-tooltip-4ed993c7.js";import"./el-slider-07e60acd.js";import"./el-input-number-815f9c07.js";import"./el-input-51d05b2a.js";import"./@element-plus-a8abf029.js";import"./stashSpace-391fdb88.js";import"./pinia-71cafef5.js";import"./StashSelect-5af938b3.js";import"./validator-7d68535e.js";import"./json-editor-vue3-5344cb8d.js";import"./jsoneditor-5f1e2c9e.js";import"./ResultImgWithStash-c075e0f0.js";import"./el-card-a6aa41d5.js";import"./CameraOpen-7e226201.js";import"./el-row-67417f48.js";import"./vue-konva-50f8b9a5.js";import"./konva-364a8bb7.js";import"./@logicflow-db5a80c3.js";import"./vue-router-841924de.js";import"./vue-i18n-76143ed6.js";import"./@intlify-0ef9a929.js";import"./tiff.js-f0b72392.js";import"./jszip-0fc1db0a.js";import"./@quasar-a9c09e53.js";const oe={class:"step-page"},te={class:"step-nav"},Eo=z({__name:"V8PoseInferView",setup(le){const E=x();L(()=>{console.log("Pose Infer"),R()});const w=p(),m=p(1),i=p([""]),u=p(.7),f=p(B.global.t("Upload")),n=_({model_name:""}),M=_({model_name:[{required:!0,message:B.global.t("NoModelName"),trigger:"blur"}]}),R=async()=>{const o=await P("json","/api/listdirs",{model:"Pose"});if(o==null)return;const e=await o.data;if(console.log("result =>",e),e.code!==0){U(`API Error: ${e.code}`);return}i.value=e.result.folder_list,n.model_name=i.value.length>0?i.value[0]:"",console.log("modelFolder =>",i),console.log("modelFolder len =>",i.value.length)},A=async o=>{o&&await o.validate(async(e,a)=>{if(e){console.log("submit!"),console.log(n);const g=ee();await D(),j(),g.close()}else console.log("error submit!",a)})},D=async()=>{const o=await P("json","/api/init_pose",n);if(console.log("res =>",o),o==null)return;const e=await o.data;if(console.log("result =>",e),e.code!==0){U(`API Error: ${e.code}`);return}},j=()=>{m.value++};return(o,e)=>(s(),$(k,null,[b("h4",null,c(o.$t("Kernel.Pose")),1),l(t(X)),b("div",oe,[b("div",te,[l(t(Q),{active:m.value,"finish-status":"success",class:"w3-margin-bottom",direction:t(E).lt.md?"horizontal":"vertical"},{default:r(()=>[l(t(F),{title:o.$t("ModelSet"),onClick:e[0]||(e[0]=a=>m.value=1),class:"pointer"},{icon:r(()=>[l(y,{name:"fa-solid fa-gear",class:"w3-large"})]),_:1},8,["title"]),l(t(F),{title:o.$t("Inference"),onClick:e[1]||(e[1]=a=>m.value=u.value>0?2:1),class:"pointer"},{icon:r(()=>[l(y,{name:"fa-solid fa-brain",class:"w3-large"})]),_:1},8,["title"])]),_:1},8,["active","direction"])]),l(t(v),null,{default:r(()=>[i.value.length===0?(s(),d(t(v),{key:0,style:{height:"10vh"}},{default:r(()=>[l(t(W),{title:o.$t("NoWeight"),type:"warning",closable:!1,"show-icon":"",style:{"--el-alert-title-font-size":"1em"}},null,8,["title"])]),_:1})):(s(),d(t(v),{key:1},{default:r(()=>[m.value===1?(s(),d(t(H),{key:0,ref_key:"ruleFormRef",ref:w,model:n,rules:M,"label-width":t(E).lt.sm?"100px":"210px","label-position":"left",class:"demo-ruleForm","status-icon":""},{default:r(()=>[l(t(S),{label:o.$t("ModelName"),"label-width":"auto"},{default:r(()=>[l(t(K),{modelValue:n.model_name,"onUpdate:modelValue":e[2]||(e[2]=a=>n.model_name=a)},{default:r(()=>[(s(!0),$(k,null,q(i.value,(a,g)=>(s(),d(t(O),{label:a,value:a,key:g},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(t(S),null,{default:r(()=>[l(t(G),{type:"primary",onClick:e[3]||(e[3]=a=>A(w.value))},{default:r(()=>[h(c(o.$t("ModelSet")),1)]),_:1})]),_:1})]),_:1},8,["model","rules","label-width"])):I("",!0),m.value===2?(s(),d(t(v),{key:1},{default:r(()=>[l(t(T),{style:{padding:"0"}},{default:r(()=>[l(t(J),{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=a=>f.value=a)},{default:r(()=>[l(t(N),{label:o.$t("Upload")},{default:r(()=>[h(c(o.$t("Upload")),1)]),_:1},8,["label"]),l(t(N),{label:o.$t("Camera")},{default:r(()=>[h(c(o.$t("Camera")),1)]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),V(l(Y,{threshold:u.value,"onUpdate:threshold":e[5]||(e[5]=a=>u.value=a),infer_kernel:"pose"},null,8,["threshold"]),[[C,f.value===o.$t("Upload")]]),V(l(Z,{infer_kernel:"pose",threshold:u.value},null,8,["threshold"]),[[C,f.value===o.$t("Camera")]])]),_:1})):I("",!0)]),_:1}))]),_:1})])],64))}});export{Eo as default};
