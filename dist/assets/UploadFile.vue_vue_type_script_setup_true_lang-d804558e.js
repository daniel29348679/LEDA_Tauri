import"./base-23d00206.js";import{E as U}from"./el-upload-5677c5b6.js";import"./el-progress-ed4e49af.js";import{E as V}from"./el-dialog-f482d18c.js";import"./el-overlay-81162264.js";import{c as $}from"./el-main-e0dc383b.js";import{a as v}from"./el-button-ded9ecc1.js";import{E as B}from"./el-divider-67eeba91.js";import{E as b}from"./el-checkbox-d46297b7.js";import{E as w}from"./el-form-item-62aac1b2.js";import{p as I,h as N}from"./@element-plus-a8abf029.js";import{u as R}from"./uploadFile-6ce60004.js";import{o as D}from"./index-d07dfee2.js";import{S as P}from"./StashSelect-5af938b3.js";import{u as T}from"./stashSpace-391fdb88.js";import{E as h}from"./index-b8931eed.js";import{y as z,h as M,F as j,b as k,o as s,c as m,a7 as f,bI as a,ag as p,af as n,bf as r,u as l,a8 as u,a as g,S as x}from"./@vue-19632928.js";const O={key:2},W={class:"el-upload__tip"},q={key:3},A={key:0,class:"el-upload__tip"},G=["src"],H={key:4},J={class:"el-upload__text"},K={key:0,class:"el-upload__tip"},fe=z({__name:"UploadFile",props:{api:{},type:{},click:{type:Function},tip:{},param:{},file_type:{},existStashSpace:{type:Boolean},otherFile:{},otherFileName:{},isInlineUpload:{type:Boolean},isClear:{type:Boolean},uploaded:{type:Function}},setup(E){M(()=>{console.log("Upload")}),j(()=>{d.clear(),c.value.startsWith("blob:")&&URL.revokeObjectURL(c.value)});const e=E,C=T(),d=R(),c=k(""),_=k(!1),y=k(!1),S=async()=>{const o=D();try{const t=y.value?C.currentFolderPath:void 0,i=t?{...e.param,folder_path:t}:e.param;await d.upload(e.api,d.fileList,i,e.file_type,e.otherFile,e.otherFileName),e.click!==void 0&&e.click(t),e.uploaded!==void 0&&e.uploaded()}finally{o.close()}},F=(o,t)=>{console.log(o,t)},L=o=>{c.value=o.url,_.value=!0};return(o,t)=>(s(),m(x,null,[e.isInlineUpload?(s(),f(l(w),{key:0},{default:a(()=>[p(l(v),{type:"success",onClick:t[0]||(t[0]=i=>S())},{default:a(()=>[n(r(o.$t("Upload")),1)]),_:1})]),_:1})):u("",!0),p(l($),null,{default:a(()=>[e.isInlineUpload?u("",!0):(s(),f(l(v),{key:0,type:"success",onClick:t[1]||(t[1]=i=>S())},{default:a(()=>[n(r(o.$t("Upload")),1)]),_:1})),p(l(B)),e.existStashSpace?(s(),f(l(b),{key:1,modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=i=>y.value=i)},{default:a(()=>[n(r(o.$t("Label.UsingTemporaryStorageSpace")),1)]),_:1},8,["modelValue"])):u("",!0),y.value?(s(),m("div",O,[p(P,{"is-on-page":"","is-upload":""}),g("span",W,r(o.tip),1)])):e.type==="image"?(s(),m("div",q,[p(l(U),{class:"upload-drag-img","file-list":l(d).fileList,"onUpdate:fileList":t[4]||(t[4]=i=>l(d).fileList=i),action:e.api,"list-type":"picture-card","auto-upload":!1,"on-preview":L,"on-remove":F,multiple:"",drag:""},{tip:a(()=>[e.tip!==void 0?(s(),m("div",A,[n(r(e.tip)+" ",1),e.isClear?(s(),f(l(v),{key:0,type:"danger",size:"small",onClick:t[3]||(t[3]=i=>l(d).fileList=[]),style:{float:"right"}},{default:a(()=>[n(r(o.$t("Button.Reset")),1)]),_:1})):u("",!0)])):u("",!0)]),default:a(()=>[p(l(h),null,{default:a(()=>[p(l(I))]),_:1})]),_:1},8,["file-list","action"]),p(l(V),{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=i=>_.value=i),style:{width:"50%","min-width":"350px"}},{default:a(()=>[g("img",{style:{width:"100%"},src:c.value,alt:"Preview Image"},null,8,G)]),_:1},8,["modelValue"])])):e.type==="file"?(s(),m("div",H,[p(l(U),{"file-list":l(d).fileList,"onUpdate:fileList":t[7]||(t[7]=i=>l(d).fileList=i),class:"upload-demo",action:e.api,"auto-upload":!1,multiple:"",drag:""},{tip:a(()=>[e.tip!==void 0?(s(),m("div",K,[n(r(e.tip)+" ",1),e.isClear?(s(),f(l(v),{key:0,type:"danger",size:"small",onClick:t[6]||(t[6]=i=>l(d).fileList=[]),style:{float:"right"}},{default:a(()=>[n(r(o.$t("Button.Reset")),1)]),_:1})):u("",!0)])):u("",!0)]),default:a(()=>[p(l(h),{class:"el-icon--upload"},{default:a(()=>[p(l(N))]),_:1}),g("div",J,[n(r(o.$t("DropFile"))+" ",1),g("em",null,r(o.$t("ClickToUpload")),1)])]),_:1},8,["file-list","action"])])):u("",!0)]),_:1})],64))}});export{fe as _};
